<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_79) on Fri Oct 30 20:47:49 CET 2015 -->
<title>DefaultUWSErrorWriter</title>
<meta name="date" content="2015-10-30">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="DefaultUWSErrorWriter";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/DefaultUWSErrorWriter.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev Class</li>
<li><a href="../../../uws/service/error/ServiceErrorWriter.html" title="interface in uws.service.error"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?uws/service/error/DefaultUWSErrorWriter.html" target="_top">Frames</a></li>
<li><a href="DefaultUWSErrorWriter.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">uws.service.error</div>
<h2 title="Class DefaultUWSErrorWriter" class="title">Class DefaultUWSErrorWriter</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>uws.service.error.DefaultUWSErrorWriter</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../../uws/service/error/ServiceErrorWriter.html" title="interface in uws.service.error">ServiceErrorWriter</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="strong">DefaultUWSErrorWriter</span>
extends java.lang.Object
implements <a href="../../../uws/service/error/ServiceErrorWriter.html" title="interface in uws.service.error">ServiceErrorWriter</a></pre>
<div class="block"><p>Default implementation of a <a href="../../../uws/service/error/ServiceErrorWriter.html" title="interface in uws.service.error"><code>ServiceErrorWriter</code></a> interface for a UWS service.</p>
 
 <p>
        All errors are written using the function <a href="../../../uws/service/error/DefaultUWSErrorWriter.html#formatError(java.lang.String,%20uws.job.ErrorType,%20int,%20java.lang.String,%20java.lang.String,%20uws.job.user.JobOwner,%20javax.servlet.http.HttpServletResponse,%20java.lang.String)"><code>formatError(String, ErrorType, int, String, String, JobOwner, HttpServletResponse, String)</code></a>
        in order to format the error in the most appropriate format. 2 formats are managed by default by this implementation: HTML (default) and JSON.
        This format is chosen thanks to the "Accept" header of the HTTP request. If no request is provided or if there is no known format,
        the HTML format is chosen by default.
 </p>
 
 <p>
        <a href="../../../uws/UWSException.html" title="class in uws"><code>UWSException</code></a>s may precise the HTTP error code to apply,
        which will be used to set the HTTP status of the response. If it is a different kind of exception,
        the HTTP status 500 (INTERNAL SERVER ERROR) will be used.
 </p>
 
 <p>
        Besides, all exceptions except <a href="../../../uws/UWSException.html" title="class in uws"><code>UWSException</code></a> and <code>TAPException</code> will be logged as FATAL in the TAP context
        (with no event and no object). Thus the full stack trace is available to the administrator so that the error can
        be understood as easily and quickly as possible.
        <i>The stack trace is no longer displayed to the user.</i>
 </p></div>
<dl><dt><span class="strong">Version:</span></dt>
  <dd>4.1 (09/2014)</dd>
<dt><span class="strong">Author:</span></dt>
  <dd>Gr&eacute;gory Mantelet (CDS;ARI)</dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="../../../uws/service/log/UWSLog.html" title="interface in uws.service.log">UWSLog</a></code></td>
<td class="colLast"><code><strong><a href="../../../uws/service/error/DefaultUWSErrorWriter.html#logger">logger</a></strong></code>
<div class="block">Logger to use when grave error must be logged or if a JSON error occurs.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected java.lang.String[]</code></td>
<td class="colLast"><code><strong><a href="../../../uws/service/error/DefaultUWSErrorWriter.html#managedFormats">managedFormats</a></strong></code>
<div class="block">List of all managed output formats.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../uws/service/error/DefaultUWSErrorWriter.html#DefaultUWSErrorWriter(uws.service.log.UWSLog)">DefaultUWSErrorWriter</a></strong>(<a href="../../../uws/service/log/UWSLog.html" title="interface in uws.service.log">UWSLog</a>&nbsp;logger)</code>
<div class="block">Build an error writer which will log any error in response of an HTTP request.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../uws/service/error/DefaultUWSErrorWriter.html#chooseFormat(java.lang.String)">chooseFormat</a></strong>(java.lang.String&nbsp;acceptHeader)</code>
<div class="block">Parses the header "Accept", splits it in a list of MIME type and compare each one to each managed formats (<a href="../../../uws/service/error/DefaultUWSErrorWriter.html#managedFormats"><code>managedFormats</code></a>).</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../uws/service/error/DefaultUWSErrorWriter.html#formatError(java.lang.String,%20uws.job.ErrorType,%20int,%20java.lang.String,%20java.lang.String,%20uws.job.user.JobOwner,%20javax.servlet.http.HttpServletResponse,%20java.lang.String)">formatError</a></strong>(java.lang.String&nbsp;message,
           <a href="../../../uws/job/ErrorType.html" title="enum in uws.job">ErrorType</a>&nbsp;type,
           int&nbsp;httpErrorCode,
           java.lang.String&nbsp;reqID,
           java.lang.String&nbsp;action,
           <a href="../../../uws/job/user/JobOwner.html" title="interface in uws.job.user">JobOwner</a>&nbsp;user,
           javax.servlet.http.HttpServletResponse&nbsp;response,
           java.lang.String&nbsp;acceptHeader)</code>
<div class="block">Formats and writes the given error in the HTTP servlet response.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../uws/service/error/DefaultUWSErrorWriter.html#formatHTMLError(java.lang.String,%20uws.job.ErrorType,%20int,%20java.lang.String,%20java.lang.String,%20uws.job.user.JobOwner,%20javax.servlet.http.HttpServletResponse)">formatHTMLError</a></strong>(java.lang.String&nbsp;message,
               <a href="../../../uws/job/ErrorType.html" title="enum in uws.job">ErrorType</a>&nbsp;type,
               int&nbsp;httpErrorCode,
               java.lang.String&nbsp;reqID,
               java.lang.String&nbsp;action,
               <a href="../../../uws/job/user/JobOwner.html" title="interface in uws.job.user">JobOwner</a>&nbsp;user,
               javax.servlet.http.HttpServletResponse&nbsp;response)</code>
<div class="block">Formats and writes the given error in the HTTP servlet response.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../uws/service/error/DefaultUWSErrorWriter.html#formatJSONError(java.lang.String,%20uws.job.ErrorType,%20int,%20java.lang.String,%20java.lang.String,%20uws.job.user.JobOwner,%20javax.servlet.http.HttpServletResponse)">formatJSONError</a></strong>(java.lang.String&nbsp;message,
               <a href="../../../uws/job/ErrorType.html" title="enum in uws.job">ErrorType</a>&nbsp;type,
               int&nbsp;httpErrorCode,
               java.lang.String&nbsp;reqID,
               java.lang.String&nbsp;action,
               <a href="../../../uws/job/user/JobOwner.html" title="interface in uws.job.user">JobOwner</a>&nbsp;user,
               javax.servlet.http.HttpServletResponse&nbsp;response)</code>
<div class="block">Formats and writes the given error in the HTTP servlet response.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../uws/service/error/DefaultUWSErrorWriter.html#getErrorDetailsMIMEType()">getErrorDetailsMIMEType</a></strong>()</code>
<div class="block">Get the MIME type of the error details written by <a href="../../../uws/service/error/ServiceErrorWriter.html#writeError(java.lang.Throwable,%20uws.job.ErrorSummary,%20uws.job.UWSJob,%20java.io.OutputStream)"><code>ServiceErrorWriter.writeError(Throwable, ErrorSummary, UWSJob, OutputStream)</code></a> in the error summary.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../uws/service/error/DefaultUWSErrorWriter.html#writeError(java.lang.String,%20uws.job.ErrorType,%20int,%20javax.servlet.http.HttpServletResponse,%20javax.servlet.http.HttpServletRequest,%20java.lang.String,%20uws.job.user.JobOwner,%20java.lang.String)">writeError</a></strong>(java.lang.String&nbsp;message,
          <a href="../../../uws/job/ErrorType.html" title="enum in uws.job">ErrorType</a>&nbsp;type,
          int&nbsp;httpErrorCode,
          javax.servlet.http.HttpServletResponse&nbsp;response,
          javax.servlet.http.HttpServletRequest&nbsp;request,
          java.lang.String&nbsp;reqID,
          <a href="../../../uws/job/user/JobOwner.html" title="interface in uws.job.user">JobOwner</a>&nbsp;user,
          java.lang.String&nbsp;action)</code>
<div class="block">Write the described error in the given response.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../uws/service/error/DefaultUWSErrorWriter.html#writeError(java.lang.Throwable,%20uws.job.ErrorSummary,%20uws.job.UWSJob,%20java.io.OutputStream)">writeError</a></strong>(java.lang.Throwable&nbsp;t,
          <a href="../../../uws/job/ErrorSummary.html" title="class in uws.job">ErrorSummary</a>&nbsp;error,
          <a href="../../../uws/job/UWSJob.html" title="class in uws.job">UWSJob</a>&nbsp;job,
          java.io.OutputStream&nbsp;output)</code>
<div class="block">Write the given error in the given output stream.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../uws/service/error/DefaultUWSErrorWriter.html#writeError(java.lang.Throwable,%20javax.servlet.http.HttpServletResponse,%20javax.servlet.http.HttpServletRequest,%20java.lang.String,%20uws.job.user.JobOwner,%20java.lang.String)">writeError</a></strong>(java.lang.Throwable&nbsp;t,
          javax.servlet.http.HttpServletResponse&nbsp;response,
          javax.servlet.http.HttpServletRequest&nbsp;request,
          java.lang.String&nbsp;reqID,
          <a href="../../../uws/job/user/JobOwner.html" title="interface in uws.job.user">JobOwner</a>&nbsp;user,
          java.lang.String&nbsp;action)</code>
<div class="block">Write the given exception in the given response.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="managedFormats">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>managedFormats</h4>
<pre>protected final&nbsp;java.lang.String[] managedFormats</pre>
<div class="block">List of all managed output formats.</div>
</li>
</ul>
<a name="logger">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>logger</h4>
<pre>protected final&nbsp;<a href="../../../uws/service/log/UWSLog.html" title="interface in uws.service.log">UWSLog</a> logger</pre>
<div class="block">Logger to use when grave error must be logged or if a JSON error occurs.</div>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="DefaultUWSErrorWriter(uws.service.log.UWSLog)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>DefaultUWSErrorWriter</h4>
<pre>public&nbsp;DefaultUWSErrorWriter(<a href="../../../uws/service/log/UWSLog.html" title="interface in uws.service.log">UWSLog</a>&nbsp;logger)</pre>
<div class="block">Build an error writer which will log any error in response of an HTTP request.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>logger</code> - Object to use to log errors.</dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="writeError(java.lang.Throwable, javax.servlet.http.HttpServletResponse, javax.servlet.http.HttpServletRequest, java.lang.String, uws.job.user.JobOwner, java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>writeError</h4>
<pre>public&nbsp;void&nbsp;writeError(java.lang.Throwable&nbsp;t,
              javax.servlet.http.HttpServletResponse&nbsp;response,
              javax.servlet.http.HttpServletRequest&nbsp;request,
              java.lang.String&nbsp;reqID,
              <a href="../../../uws/job/user/JobOwner.html" title="interface in uws.job.user">JobOwner</a>&nbsp;user,
              java.lang.String&nbsp;action)
                throws java.io.IOException</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../uws/service/error/ServiceErrorWriter.html#writeError(java.lang.Throwable,%20javax.servlet.http.HttpServletResponse,%20javax.servlet.http.HttpServletRequest,%20java.lang.String,%20uws.job.user.JobOwner,%20java.lang.String)">ServiceErrorWriter</a></code></strong></div>
<div class="block"><p>Write the given exception in the given response.</p>
 
 <p><i>Note:
        If this function is called without at least an exception and an HTTP response, nothing should be done.
        No error may be thrown.
 </i></p></div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../uws/service/error/ServiceErrorWriter.html#writeError(java.lang.Throwable,%20javax.servlet.http.HttpServletResponse,%20javax.servlet.http.HttpServletRequest,%20java.lang.String,%20uws.job.user.JobOwner,%20java.lang.String)">writeError</a></code>&nbsp;in interface&nbsp;<code><a href="../../../uws/service/error/ServiceErrorWriter.html" title="interface in uws.service.error">ServiceErrorWriter</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>t</code> - Exception to write/format.</dd><dd><code>response</code> - Response in which the given exception must be written.</dd><dd><code>request</code> - Request at the origin of the error (MAY BE NULL).</dd><dd><code>reqID</code> - ID of the request (which let the user and the administrator identify the failed request). (MAY BE NULL if the request is not provided)</dd><dd><code>user</code> - User which sends the given request (which generates the error) (MAY BE NULL).</dd><dd><code>action</code> - Type/Name of the action which generates the error (MAY BE NULL).</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code> - If there is an error while writing the response.</dd></dl>
</li>
</ul>
<a name="writeError(java.lang.String, uws.job.ErrorType, int, javax.servlet.http.HttpServletResponse, javax.servlet.http.HttpServletRequest, java.lang.String, uws.job.user.JobOwner, java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>writeError</h4>
<pre>public&nbsp;void&nbsp;writeError(java.lang.String&nbsp;message,
              <a href="../../../uws/job/ErrorType.html" title="enum in uws.job">ErrorType</a>&nbsp;type,
              int&nbsp;httpErrorCode,
              javax.servlet.http.HttpServletResponse&nbsp;response,
              javax.servlet.http.HttpServletRequest&nbsp;request,
              java.lang.String&nbsp;reqID,
              <a href="../../../uws/job/user/JobOwner.html" title="interface in uws.job.user">JobOwner</a>&nbsp;user,
              java.lang.String&nbsp;action)
                throws java.io.IOException</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../uws/service/error/ServiceErrorWriter.html#writeError(java.lang.String,%20uws.job.ErrorType,%20int,%20javax.servlet.http.HttpServletResponse,%20javax.servlet.http.HttpServletRequest,%20java.lang.String,%20uws.job.user.JobOwner,%20java.lang.String)">ServiceErrorWriter</a></code></strong></div>
<div class="block"><p>Write the described error in the given response.</p>
 
 <p><i>Note:
        If this function is called without at least a message and an HTTP response, nothing should be done.
        No error may be thrown.
 </i></p></div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../uws/service/error/ServiceErrorWriter.html#writeError(java.lang.String,%20uws.job.ErrorType,%20int,%20javax.servlet.http.HttpServletResponse,%20javax.servlet.http.HttpServletRequest,%20java.lang.String,%20uws.job.user.JobOwner,%20java.lang.String)">writeError</a></code>&nbsp;in interface&nbsp;<code><a href="../../../uws/service/error/ServiceErrorWriter.html" title="interface in uws.service.error">ServiceErrorWriter</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>message</code> - Message to display.</dd><dd><code>type</code> - Type of the error: FATAL or TRANSIENT.</dd><dd><code>httpErrorCode</code> - HTTP error code (i.e. 404, 500).</dd><dd><code>response</code> - Response in which the described error must be written.</dd><dd><code>request</code> - Request which causes this error.</dd><dd><code>reqID</code> - ID of the request (which let the user and the administrator identify the failed request).</dd><dd><code>user</code> - User which sends the HTTP request.</dd><dd><code>action</code> - Action corresponding to the given request.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code> - If there is an error while writing the response.</dd></dl>
</li>
</ul>
<a name="writeError(java.lang.Throwable, uws.job.ErrorSummary, uws.job.UWSJob, java.io.OutputStream)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>writeError</h4>
<pre>public&nbsp;void&nbsp;writeError(java.lang.Throwable&nbsp;t,
              <a href="../../../uws/job/ErrorSummary.html" title="class in uws.job">ErrorSummary</a>&nbsp;error,
              <a href="../../../uws/job/UWSJob.html" title="class in uws.job">UWSJob</a>&nbsp;job,
              java.io.OutputStream&nbsp;output)
                throws java.io.IOException</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../uws/service/error/ServiceErrorWriter.html#writeError(java.lang.Throwable,%20uws.job.ErrorSummary,%20uws.job.UWSJob,%20java.io.OutputStream)">ServiceErrorWriter</a></code></strong></div>
<div class="block"><p>Write the given error in the given output stream.</p>
 
 <p>
        This function is used only for the error summary of a job (that's to say to report in the
        ../error/details parameter any error which occurs while executing a job).
 </p>
 
 <p><i><b>Important note:</b>
        The error details written in the given output MUST always have the same MIME type.
        This latter MUST be returned by <a href="../../../uws/service/error/ServiceErrorWriter.html#getErrorDetailsMIMEType()"><code>ServiceErrorWriter.getErrorDetailsMIMEType()</code></a>.
 </i></p></div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../uws/service/error/ServiceErrorWriter.html#writeError(java.lang.Throwable,%20uws.job.ErrorSummary,%20uws.job.UWSJob,%20java.io.OutputStream)">writeError</a></code>&nbsp;in interface&nbsp;<code><a href="../../../uws/service/error/ServiceErrorWriter.html" title="interface in uws.service.error">ServiceErrorWriter</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>t</code> - Error to write. If <i>error</i> is not null, it will be displayed instead of the message of this throwable.</dd><dd><code>error</code> - Summary of the error. It may particularly contain a message different from the one of the given exception. In this case, it will displayed instead of the exception's message.</dd><dd><code>job</code> - The job which fails.</dd><dd><code>output</code> - Stream in which the error must be written.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code> - If there an error while writing the error in the given stream.</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../../uws/service/error/ServiceErrorWriter.html#getErrorDetailsMIMEType()"><code>ServiceErrorWriter.getErrorDetailsMIMEType()</code></a></dd></dl>
</li>
</ul>
<a name="getErrorDetailsMIMEType()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getErrorDetailsMIMEType</h4>
<pre>public&nbsp;java.lang.String&nbsp;getErrorDetailsMIMEType()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../uws/service/error/ServiceErrorWriter.html#getErrorDetailsMIMEType()">ServiceErrorWriter</a></code></strong></div>
<div class="block"><p>Get the MIME type of the error details written by <a href="../../../uws/service/error/ServiceErrorWriter.html#writeError(java.lang.Throwable,%20uws.job.ErrorSummary,%20uws.job.UWSJob,%20java.io.OutputStream)"><code>ServiceErrorWriter.writeError(Throwable, ErrorSummary, UWSJob, OutputStream)</code></a> in the error summary.</p>
 
 <p><i><b>Important note:</b>
        If NULL is returned, the MIME type will be considered as <i>text/plain</i>.
 </i></p></div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../uws/service/error/ServiceErrorWriter.html#getErrorDetailsMIMEType()">getErrorDetailsMIMEType</a></code>&nbsp;in interface&nbsp;<code><a href="../../../uws/service/error/ServiceErrorWriter.html" title="interface in uws.service.error">ServiceErrorWriter</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>MIME type of the error details document. If NULL, it will be considered as text/plain.</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../../uws/service/error/ServiceErrorWriter.html#writeError(java.lang.Throwable,%20uws.job.ErrorSummary,%20uws.job.UWSJob,%20java.io.OutputStream)"><code>ServiceErrorWriter.writeError(Throwable, ErrorSummary, UWSJob, OutputStream)</code></a></dd></dl>
</li>
</ul>
<a name="chooseFormat(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>chooseFormat</h4>
<pre>protected final&nbsp;java.lang.String&nbsp;chooseFormat(java.lang.String&nbsp;acceptHeader)</pre>
<div class="block">Parses the header "Accept", splits it in a list of MIME type and compare each one to each managed formats (<a href="../../../uws/service/error/DefaultUWSErrorWriter.html#managedFormats"><code>managedFormats</code></a>).
 If there is a match (not case sensitive), return the corresponding managed format immediately.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>acceptHeader</code> - The header item named "Accept" (which lists all expected response formats).</dd>
<dt><span class="strong">Returns:</span></dt><dd>The first format common to the "Accept" header and the managed formats of this writer.</dd></dl>
</li>
</ul>
<a name="formatError(java.lang.String, uws.job.ErrorType, int, java.lang.String, java.lang.String, uws.job.user.JobOwner, javax.servlet.http.HttpServletResponse, java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>formatError</h4>
<pre>protected&nbsp;void&nbsp;formatError(java.lang.String&nbsp;message,
               <a href="../../../uws/job/ErrorType.html" title="enum in uws.job">ErrorType</a>&nbsp;type,
               int&nbsp;httpErrorCode,
               java.lang.String&nbsp;reqID,
               java.lang.String&nbsp;action,
               <a href="../../../uws/job/user/JobOwner.html" title="interface in uws.job.user">JobOwner</a>&nbsp;user,
               javax.servlet.http.HttpServletResponse&nbsp;response,
               java.lang.String&nbsp;acceptHeader)
                    throws java.io.IOException</pre>
<div class="block"><p>Formats and writes the given error in the HTTP servlet response.</p>
 <p>The format is chosen thanks to the Accept header of the HTTP request.
 If unknown, the HTML output is chosen.</p></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>message</code> - Error message to write.</dd><dd><code>type</code> - Type of the error: FATAL or TRANSIENT.</dd><dd><code>httpErrorCode</code> - HTTP error code (i.e. 404, 500).</dd><dd><code>reqID</code> - ID of the request at the origin of the specified error.</dd><dd><code>action</code> - Action which generates the error <i><u>note:</u> displayed only if not NULL and not empty.</dd><dd><code>user</code> - User which is at the origin of the request/action which generates the error.</dd><dd><code>response</code> - Response in which the error must be written.</dd><dd><code>acceptHeader</code> - Value of the header named "Accept" (which lists all allowed response format).</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code> - If there is an error while writing the given error.</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../../uws/service/error/DefaultUWSErrorWriter.html#formatHTMLError(java.lang.String,%20uws.job.ErrorType,%20int,%20java.lang.String,%20java.lang.String,%20uws.job.user.JobOwner,%20javax.servlet.http.HttpServletResponse)"><code>formatHTMLError(String, ErrorType, int, String, String, JobOwner, HttpServletResponse)</code></a>, 
<a href="../../../uws/service/error/DefaultUWSErrorWriter.html#formatJSONError(java.lang.String,%20uws.job.ErrorType,%20int,%20java.lang.String,%20java.lang.String,%20uws.job.user.JobOwner,%20javax.servlet.http.HttpServletResponse)"><code>formatJSONError(String, ErrorType, int, String, String, JobOwner, HttpServletResponse)</code></a></dd></dl>
</li>
</ul>
<a name="formatHTMLError(java.lang.String, uws.job.ErrorType, int, java.lang.String, java.lang.String, uws.job.user.JobOwner, javax.servlet.http.HttpServletResponse)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>formatHTMLError</h4>
<pre>protected&nbsp;void&nbsp;formatHTMLError(java.lang.String&nbsp;message,
                   <a href="../../../uws/job/ErrorType.html" title="enum in uws.job">ErrorType</a>&nbsp;type,
                   int&nbsp;httpErrorCode,
                   java.lang.String&nbsp;reqID,
                   java.lang.String&nbsp;action,
                   <a href="../../../uws/job/user/JobOwner.html" title="interface in uws.job.user">JobOwner</a>&nbsp;user,
                   javax.servlet.http.HttpServletResponse&nbsp;response)
                        throws java.io.IOException</pre>
<div class="block"><p>Formats and writes the given error in the HTTP servlet response.</p>
 <p>A full HTML response is printed with: the HTTP error code, the error type, the name of the exception, the message and the full stack trace.</p></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>message</code> - Error message to write.</dd><dd><code>type</code> - Type of the error: FATAL or TRANSIENT.</dd><dd><code>httpErrorCode</code> - HTTP error code (i.e. 404, 500).</dd><dd><code>reqID</code> - ID of the request at the origin of the specified error.</dd><dd><code>action</code> - Action which generates the error <i><u>note:</u> displayed only if not NULL and not empty.</dd><dd><code>user</code> - User which is at the origin of the request/action which generates the error.</dd><dd><code>response</code> - Response in which the error must be written.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code> - If there is an error while writing the given error.</dd></dl>
</li>
</ul>
<a name="formatJSONError(java.lang.String, uws.job.ErrorType, int, java.lang.String, java.lang.String, uws.job.user.JobOwner, javax.servlet.http.HttpServletResponse)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>formatJSONError</h4>
<pre>protected&nbsp;void&nbsp;formatJSONError(java.lang.String&nbsp;message,
                   <a href="../../../uws/job/ErrorType.html" title="enum in uws.job">ErrorType</a>&nbsp;type,
                   int&nbsp;httpErrorCode,
                   java.lang.String&nbsp;reqID,
                   java.lang.String&nbsp;action,
                   <a href="../../../uws/job/user/JobOwner.html" title="interface in uws.job.user">JobOwner</a>&nbsp;user,
                   javax.servlet.http.HttpServletResponse&nbsp;response)
                        throws java.io.IOException</pre>
<div class="block"><p>Formats and writes the given error in the HTTP servlet response.</p>
 <p>A JSON response is printed with: the HTTP error code, the error type, the name of the exception, the message and the list of all causes' message.</p></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>message</code> - Error message to write.</dd><dd><code>type</code> - Type of the error: FATAL or TRANSIENT.</dd><dd><code>httpErrorCode</code> - HTTP error code (i.e. 404, 500).</dd><dd><code>reqID</code> - ID of the request at the origin of the specified error.</dd><dd><code>action</code> - Action which generates the error <i><u>note:</u> displayed only if not NULL and not empty.</dd><dd><code>user</code> - User which is at the origin of the request/action which generates the error.</dd><dd><code>response</code> - Response in which the error must be written.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code> - If there is an error while writing the given error.</dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/DefaultUWSErrorWriter.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev Class</li>
<li><a href="../../../uws/service/error/ServiceErrorWriter.html" title="interface in uws.service.error"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?uws/service/error/DefaultUWSErrorWriter.html" target="_top">Frames</a></li>
<li><a href="DefaultUWSErrorWriter.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
