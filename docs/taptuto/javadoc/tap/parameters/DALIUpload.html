<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_95) on Fri Jan 29 20:29:45 CET 2016 -->
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>DALIUpload</title>
<meta name="date" content="2016-01-29">
<link rel="stylesheet" type="text/css" href="../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="DALIUpload";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/DALIUpload.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-files/index-1.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev Class</li>
<li><a href="../../tap/parameters/FormatController.html" title="class in tap.parameters"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../index.html?tap/parameters/DALIUpload.html" target="_top">Frames</a></li>
<li><a href="DALIUpload.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">tap.parameters</div>
<h2 title="Class DALIUpload" class="title">Class DALIUpload</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>tap.parameters.DALIUpload</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="strong">DALIUpload</span>
extends java.lang.Object</pre>
<div class="block"><p>Description of an uploaded content specified using the DALI/TAP syntax.</p>
 
 <h3>How to access the upload content?</h3>
 
 <p>
        This parameter is either a reference to a distant content and is then specified by a URI,
        or a pointer to the stored version of a file submitted inline in a HTTP request. In both cases,
        this class lets access the upload content with the function <a href="../../tap/parameters/DALIUpload.html#open()"><code>open()</code></a>.
 </p>
 
 <h3>How to get <a href="../../tap/parameters/DALIUpload.html" title="class in tap.parameters"><code>DALIUpload</code></a> objects from HTTP request parameters?</h3>
 
 <p>
        The static function <a href="../../tap/parameters/DALIUpload.html#getDALIUploads(java.util.Map,%20boolean,%20uws.service.file.UWSFileManager)"><code>getDALIUploads(Map, boolean, UWSFileManager)</code></a> should be used in order to
        extract the <a href="../../tap/parameters/DALIUpload.html" title="class in tap.parameters"><code>DALIUpload</code></a> items specified in a list of request parameters.
 </p>
 <p><i>Note:
        It is recommended to provide these parameters as a map generated by a <a href="../../uws/service/request/RequestParser.html" title="interface in uws.service.request"><code>RequestParser</code></a>.
        If not, you should ensure that values of the map associated to the "UPLOAD" parameter(s) are <code>String</code>s, <code>String</code>[]s,
        <a href="../../tap/parameters/DALIUpload.html" title="class in tap.parameters"><code>DALIUpload</code></a>s, <a href="../../tap/parameters/DALIUpload.html" title="class in tap.parameters"><code>DALIUpload</code></a>[]s or <code>Object</code>[] containing <code>String</code>s and/or <a href="../../tap/parameters/DALIUpload.html" title="class in tap.parameters"><code>DALIUpload</code></a>s.
        Besides, the request parameters referenced using the syntax "param:{param-name}" must be instances of only <a href="../../uws/service/request/UploadFile.html" title="class in uws.service.request"><code>UploadFile</code></a>
        or an array of <code>Object</code>s containing at least one <a href="../../uws/service/request/UploadFile.html" title="class in uws.service.request"><code>UploadFile</code></a> instance (if several are found, just the last one will be used).
 </i></p>
 <p>
        Calling this function will also modify a little the given list of parameters by rewriting the "UPLOAD" parameter and
        removing unreferenced uploaded files (from the list and from the file-system).
 </p>
 
 <h3>Reminder about the "UPLOAD" parameter</h3>
 
 <p>
        The IVOA standards DAL and TAP define both the same special parameter: "UPLOAD" (not case-sensitive).
 </p>
 
 <p>
        This parameter lists all upload items. A such item can be either an inline file or a reference to a distant file.
        In both cases, it is specified as a URI. The parameter "UPLOAD" sets also a label/name to this item.
        The syntax to use for a single item is the following: "{label},{URI}". Several items can be provided, but there is
        a slight difference between DALI and TAP in the way to do it. DALI says that multiple uploads MUST be done
        by several submit of a single "UPLOAD" parameter with the syntax described above. TAP says that multiple uploads CAN
        be done in one "UPLOAD" parameter by separating each item with a semicolon (;). For instance:
 </p>
 <ul>
        <li><b>In TAP:</b> "UPLOAD=tableA,param:foo;tableB,http://..." =&gt; only 1 parameter for 2 uploads</li>
        <li><b>In DALI:</b> "UPLOAD=tableA,param:foo" and "UPLOAD=tableB,http://..." =&gt; 2 parameters, one for each upload</li>
 </ul>
 
 <p><i>Note:
        The drawback of the TAP method is: what happens when a URI contains a semicolon? URI can indeed contain a such character
        and in this case the parsing becomes more tricky, or even impossible in some cases. In such cases, it is strongly
        recommended to either encode the URI (so the ";" becomes "%3B") or to forbid the TAP syntax. This latter can be
        done by setting the second parameter of <a href="../../tap/parameters/DALIUpload.html#getDALIUploads(java.util.Map,%20boolean,%20uws.service.file.UWSFileManager)"><code>getDALIUploads(Map, boolean, UWSFileManager)</code></a> to <i>false</i>.
 </i></p></div>
<dl><dt><span class="strong">Since:</span></dt>
  <dd>2.0</dd>
<dt><span class="strong">Version:</span></dt>
  <dd>2.0 (12/2014)</dd>
<dt><span class="strong">Author:</span></dt>
  <dd>Gr&eacute;gory Mantelet (ARI)</dd>
<dt><span class="strong">See Also:</span></dt><dd><a href="../../uws/service/request/RequestParser.html" title="interface in uws.service.request"><code>RequestParser</code></a></dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected static java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../tap/parameters/DALIUpload.html#DALI_UPLOAD_REGEXP">DALI_UPLOAD_REGEXP</a></strong></code>
<div class="block">Regular expression of an UPLOAD parameter as defined by DALI (REC-DALI-1.0-20131129).</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../uws/service/request/UploadFile.html" title="class in uws.service.request">UploadFile</a></code></td>
<td class="colLast"><code><strong><a href="../../tap/parameters/DALIUpload.html#file">file</a></strong></code>
<div class="block">Pointer to the stored version of the file submitted inline in a HTTP request.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="../../uws/service/file/UWSFileManager.html" title="interface in uws.service.file">UWSFileManager</a></code></td>
<td class="colLast"><code><strong><a href="../../tap/parameters/DALIUpload.html#fileManager">fileManager</a></strong></code>
<div class="block">The file manager to use when a stream will be opened toward the given URI.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../tap/parameters/DALIUpload.html#label">label</a></strong></code>
<div class="block">Name to use in the service to label this upload.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected static java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../tap/parameters/DALIUpload.html#TAP_UPLOAD_REGEXP">TAP_UPLOAD_REGEXP</a></strong></code>
<div class="block">Regular expression of an UPLOAD parameter as defined by TAP (REC-TAP-1.0).</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>java.net.URI</code></td>
<td class="colLast"><code><strong><a href="../../tap/parameters/DALIUpload.html#uri">uri</a></strong></code>
<div class="block">URI toward a distant resource.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../tap/parameters/DALIUpload.html#DALIUpload(java.lang.String,%20uws.service.request.UploadFile)">DALIUpload</a></strong>(java.lang.String&nbsp;label,
          <a href="../../uws/service/request/UploadFile.html" title="class in uws.service.request">UploadFile</a>&nbsp;file)</code>
<div class="block">Build a <a href="../../tap/parameters/DALIUpload.html" title="class in tap.parameters"><code>DALIUpload</code></a> whose the content has been submitted inline in an HTTP request.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colOne"><code><strong><a href="../../tap/parameters/DALIUpload.html#DALIUpload(java.lang.String,%20java.net.URI,%20uws.service.file.UWSFileManager)">DALIUpload</a></strong>(java.lang.String&nbsp;label,
          java.net.URI&nbsp;uri,
          <a href="../../uws/service/file/UWSFileManager.html" title="interface in uws.service.file">UWSFileManager</a>&nbsp;fileManager)</code>
<div class="block">Build a <a href="../../tap/parameters/DALIUpload.html" title="class in tap.parameters"><code>DALIUpload</code></a> whose the content is distant and specified by a URI.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected static <a href="../../tap/parameters/DALIUpload.html" title="class in tap.parameters">DALIUpload</a></code></td>
<td class="colLast"><code><strong><a href="../../tap/parameters/DALIUpload.html#buildDALIUpload(java.lang.String,%20java.lang.String,%20java.util.Map,%20uws.service.file.UWSFileManager)">buildDALIUpload</a></strong>(java.lang.String&nbsp;label,
               java.lang.String&nbsp;uri,
               java.util.Map&lt;java.lang.String,java.lang.Object&gt;&nbsp;parameters,
               <a href="../../uws/service/file/UWSFileManager.html" title="interface in uws.service.file">UWSFileManager</a>&nbsp;fileManager)</code>
<div class="block">Build a <a href="../../tap/parameters/DALIUpload.html" title="class in tap.parameters"><code>DALIUpload</code></a> corresponding to the specified URI.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected static <a href="../../tap/parameters/DALIUpload.html" title="class in tap.parameters">DALIUpload</a></code></td>
<td class="colLast"><code><strong><a href="../../tap/parameters/DALIUpload.html#fetchDALIUpload(java.lang.String,%20java.util.Map,%20uws.service.file.UWSFileManager)">fetchDALIUpload</a></strong>(java.lang.String&nbsp;uploadParam,
               java.util.Map&lt;java.lang.String,java.lang.Object&gt;&nbsp;parameters,
               <a href="../../uws/service/file/UWSFileManager.html" title="interface in uws.service.file">UWSFileManager</a>&nbsp;fileManager)</code>
<div class="block">Fetch the single upload item (a pair with the syntax: "{label},{URI}".</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected static void</code></td>
<td class="colLast"><code><strong><a href="../../tap/parameters/DALIUpload.html#fetchDALIUploads(java.util.ArrayList,%20java.util.ArrayList,%20java.lang.String,%20java.util.Map,%20boolean,%20uws.service.file.UWSFileManager)">fetchDALIUploads</a></strong>(java.util.ArrayList&lt;<a href="../../tap/parameters/DALIUpload.html" title="class in tap.parameters">DALIUpload</a>&gt;&nbsp;uploads,
                java.util.ArrayList&lt;java.lang.String&gt;&nbsp;usedFiles,
                java.lang.String&nbsp;uploadParam,
                java.util.Map&lt;java.lang.String,java.lang.Object&gt;&nbsp;parameters,
                boolean&nbsp;allowTAPSyntax,
                <a href="../../uws/service/file/UWSFileManager.html" title="interface in uws.service.file">UWSFileManager</a>&nbsp;fileManager)</code>
<div class="block">Fetch all uploads specified in the DALI/TAP "UPLOAD" parameter.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static java.util.List&lt;<a href="../../tap/parameters/DALIUpload.html" title="class in tap.parameters">DALIUpload</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../tap/parameters/DALIUpload.html#getDALIUploads(java.util.Map,%20boolean,%20uws.service.file.UWSFileManager)">getDALIUploads</a></strong>(java.util.Map&lt;java.lang.String,java.lang.Object&gt;&nbsp;requestParams,
              boolean&nbsp;allowTAPSyntax,
              <a href="../../uws/service/file/UWSFileManager.html" title="interface in uws.service.file">UWSFileManager</a>&nbsp;fileManager)</code>
<div class="block">Get all uploads specified in the DALI parameter "UPLOAD" from the given request parameters.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../tap/parameters/DALIUpload.html#isByReference()">isByReference</a></strong>()</code>
<div class="block">Tell whether this upload is actually a reference toward a distant resource.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>java.io.InputStream</code></td>
<td class="colLast"><code><strong><a href="../../tap/parameters/DALIUpload.html#open()">open</a></strong>()</code>
<div class="block">Open a stream to the content of this upload.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected static java.lang.String[]</code></td>
<td class="colLast"><code><strong><a href="../../tap/parameters/DALIUpload.html#parseDALIParam(java.lang.String)">parseDALIParam</a></strong>(java.lang.String&nbsp;definition)</code>
<div class="block">Extract the two parts (label and URI) of the given DALI parameter, and then, check their syntax.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../tap/parameters/DALIUpload.html#toString()">toString</a></strong>()</code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="file">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>file</h4>
<pre>public final&nbsp;<a href="../../uws/service/request/UploadFile.html" title="class in uws.service.request">UploadFile</a> file</pre>
<div class="block"><p>Pointer to the stored version of the file submitted inline in a HTTP request.</p>
 <p><i>Note:
        If NULL, this <a href="../../tap/parameters/DALIUpload.html" title="class in tap.parameters"><code>DALIUpload</code></a> is then a "byReference" upload, meaning that its content is distant
        and can be accessed only with the URI <a href="../../tap/parameters/DALIUpload.html#uri"><code>uri</code></a>.
 </i></p></div>
</li>
</ul>
<a name="uri">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>uri</h4>
<pre>public final&nbsp;java.net.URI uri</pre>
<div class="block"><p>URI toward a distant resource.</p>
 <p><i>Note:
        If NULL, this <a href="../../tap/parameters/DALIUpload.html" title="class in tap.parameters"><code>DALIUpload</code></a> corresponds to a file submitted inline in a HTTP request.
        Its content has then been stored by this service and can be accessed using the pointer <a href="../../tap/parameters/DALIUpload.html#file"><code>file</code></a>.
  </i></p></div>
</li>
</ul>
<a name="label">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>label</h4>
<pre>public final&nbsp;java.lang.String label</pre>
<div class="block"><p>Name to use in the service to label this upload.</p>
 <p><i>Note:
        In a TAP service, this label is the name of the table to create in the database
        when creating the corresponding table inside it.
 </i></p></div>
</li>
</ul>
<a name="fileManager">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>fileManager</h4>
<pre>protected final&nbsp;<a href="../../uws/service/file/UWSFileManager.html" title="interface in uws.service.file">UWSFileManager</a> fileManager</pre>
<div class="block">The file manager to use when a stream will be opened toward the given URI.
 It should know how to access it, because the URI can use a URL scheme (http, https, ftp) but also another scheme
 unknown by the library (e.g. ivo, vos).</div>
</li>
</ul>
<a name="DALI_UPLOAD_REGEXP">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DALI_UPLOAD_REGEXP</h4>
<pre>protected static final&nbsp;java.lang.String DALI_UPLOAD_REGEXP</pre>
<div class="block"><p>Regular expression of an UPLOAD parameter as defined by DALI (REC-DALI-1.0-20131129).</p>
 <p><i>Note:
        In DALI, multiple uploads must be done by posting several UPLOAD parameters.
        It is not possible to provide directly a list of parameters as in TAP.
        However, the advantage of the DALI method is to allow ; in URI (while ; is the
        parameter separator in TAP).
 </i></p></div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../constant-values.html#tap.parameters.DALIUpload.DALI_UPLOAD_REGEXP">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="TAP_UPLOAD_REGEXP">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>TAP_UPLOAD_REGEXP</h4>
<pre>protected static final&nbsp;java.lang.String TAP_UPLOAD_REGEXP</pre>
<div class="block"><p>Regular expression of an UPLOAD parameter as defined by TAP (REC-TAP-1.0).</p>
 <p><i>Note:
        In TAP, multiple uploads may be done by POSTing only one UPLOAD parameter
        whose the value is a list of DALI UPLOAD parameters, separated by a ;
 </i></p></div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../constant-values.html#tap.parameters.DALIUpload.TAP_UPLOAD_REGEXP">Constant Field Values</a></dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="DALIUpload(java.lang.String, uws.service.request.UploadFile)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DALIUpload</h4>
<pre>public&nbsp;DALIUpload(java.lang.String&nbsp;label,
          <a href="../../uws/service/request/UploadFile.html" title="class in uws.service.request">UploadFile</a>&nbsp;file)</pre>
<div class="block"><p>Build a <a href="../../tap/parameters/DALIUpload.html" title="class in tap.parameters"><code>DALIUpload</code></a> whose the content has been submitted inline in an HTTP request.</p>
 
 <p>
        A such upload has been specified by referencing another HTTP request parameter containing an inline file.
        The used syntax was then: "{label},param:{param-name}".
 </p></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>label</code> - Label of the DALIUpload (i.e. {label} inside an "UPLOAD" parameter value "{label},{URI}").
                <i>Note: If NULL, the file name will be used as label.</i></dd><dd><code>file</code> - Pointer to the uploaded file.</dd></dl>
</li>
</ul>
<a name="DALIUpload(java.lang.String, java.net.URI, uws.service.file.UWSFileManager)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>DALIUpload</h4>
<pre>public&nbsp;DALIUpload(java.lang.String&nbsp;label,
          java.net.URI&nbsp;uri,
          <a href="../../uws/service/file/UWSFileManager.html" title="interface in uws.service.file">UWSFileManager</a>&nbsp;fileManager)</pre>
<div class="block"><p>Build a <a href="../../tap/parameters/DALIUpload.html" title="class in tap.parameters"><code>DALIUpload</code></a> whose the content is distant and specified by a URI.</p>
 
 <p>
        A such upload has been specified by referencing a URI (whose the scheme is different from "param").
        The used syntax was then: "{label},{URI}".
 </p></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>label</code> - Label of the DALIUpload (i.e. {label} inside an "UPLOAD" parameter value "{label},{URI}"). <i>Note: If NULL, the URI will be used as label.</i></dd><dd><code>uri</code> - URI toward a distant file. <i><b>The scheme of this URI must be different from "param".</b> This scheme is indeed reserved by the DALI syntax to reference a HTTP request parameter containing an inline file.</i></dd><dd><code>fileManager</code> - The file manager to use when a stream will be opened toward the given URI. This file manager should know how to access it,
                        because the URI can use a URL scheme (http, https, ftp) but also another scheme unknown by the library (e.g. ivo, vos).</dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="isByReference()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isByReference</h4>
<pre>public&nbsp;boolean&nbsp;isByReference()</pre>
<div class="block">Tell whether this upload is actually a reference toward a distant resource.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd><i>true</i> if this upload is referenced by a URI,
                <i>false</i> if the upload has been submitted inline in the HTTP request.</dd></dl>
</li>
</ul>
<a name="open()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>open</h4>
<pre>public&nbsp;java.io.InputStream&nbsp;open()
                         throws <a href="../../uws/service/file/UnsupportedURIProtocolException.html" title="class in uws.service.file">UnsupportedURIProtocolException</a>,
                                java.io.IOException</pre>
<div class="block">Open a stream to the content of this upload.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>An InputStream.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../uws/service/file/UnsupportedURIProtocolException.html" title="class in uws.service.file">UnsupportedURIProtocolException</a></code> - If the URI of this upload item is using a protocol not supported by this service implementation.</dd>
<dd><code>java.io.IOException</code> - If the stream can not be opened.</dd></dl>
</li>
</ul>
<a name="toString()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>toString</h4>
<pre>public&nbsp;java.lang.String&nbsp;toString()</pre>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code>toString</code>&nbsp;in class&nbsp;<code>java.lang.Object</code></dd>
</dl>
</li>
</ul>
<a name="getDALIUploads(java.util.Map, boolean, uws.service.file.UWSFileManager)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getDALIUploads</h4>
<pre>public static final&nbsp;java.util.List&lt;<a href="../../tap/parameters/DALIUpload.html" title="class in tap.parameters">DALIUpload</a>&gt;&nbsp;getDALIUploads(java.util.Map&lt;java.lang.String,java.lang.Object&gt;&nbsp;requestParams,
                                        boolean&nbsp;allowTAPSyntax,
                                        <a href="../../uws/service/file/UWSFileManager.html" title="interface in uws.service.file">UWSFileManager</a>&nbsp;fileManager)
                                                       throws <a href="../../tap/TAPException.html" title="class in tap">TAPException</a></pre>
<div class="block"><p>Get all uploads specified in the DALI parameter "UPLOAD" from the given request parameters.</p>
 
 <p><i>Note:
        This function is case INsensitive for the "UPLOAD" parameter.
 </i></p>
 <p><b>WARNING:</b>
        Calling this function modifies the given map ONLY IF the "UPLOAD" parameter (whatever is its case) is found.
        In such case, the following modifications are applied:
 </p>
 <ul>
        <li>
                All "UPLOAD" parameters will be removed and then added again in the map with their corresponding <a href="../../tap/parameters/DALIUpload.html" title="class in tap.parameters"><code>DALIUpload</code></a> item (not any more a String).
        </li>
        <li>
                If <i>allowTAPSyntax</i> is <i>true</i>, several uploads may be specified in the same "UPLOAD" parameter value.
                For more clarity for the user (once the parameters listed), this list of uploads will be split in the same number of "UPLOAD" parameters.
                That's to say, there will be only one "UPLOAD" item in the Map, but its value will be an array containing every specified uploads:
                <i>an array of <a href="../../tap/parameters/DALIUpload.html" title="class in tap.parameters"><code>DALIUpload</code></a> objects</i>.
        </li>
        <li>
                If there is at least one "UPLOAD" parameter, all uploaded files (parameters associated with instances of <a href="../../uws/service/request/UploadFile.html" title="class in uws.service.request"><code>UploadFile</code></a>) will be removed
                from the map (and also from the file system). They are indeed not useful for a DALI service since all interesting uploads have already been
                listed.
        </li>
 </ul>
 
 <p><i>Note:
        This function can be called several times on the same map. After a first call, this function will just gathers into a List
        all found <a href="../../tap/parameters/DALIUpload.html" title="class in tap.parameters"><code>DALIUpload</code></a> objects. Of course, only uploads specified in the "UPLOAD" parameter(s) will be returned and others will be removed
        as explained above.
 </i></p>
 
 <h3>DALI and TAP syntax</h3>
 <p>
        The "UPLOAD" parameter lists all files to consider as uploaded.
        The syntax for one item is the following: "{name},{uri}", where {uri} is "param:{param-ref}" when the file is provided
        inline in the parameter named {param-ref}, otherwise, it can be any valid URI (http:..., ftp:..., vos:..., ivo:..., etc...).
 </p>
 
 <p>
        The parameter <i>allowTAPSyntax</i> lets switch between the DALI and TAP syntax.
        The only difference between them, is in the way to list multiple uploads. In TAP, they can be given as a semicolon separated
        list in a single parameter, whereas in DALI, there must be submitted as several individual parameters. For instance:
 </p>
 <ul>
        <li><b>In TAP:</b> "UPLOAD=tableA,param:foo;tableB,http://..." =&gt; only 1 parameter</li>
        <li><b>In DALI:</b> "UPLOAD=tableA,param:foo" and "UPLOAD=tableB,http://..." =&gt; 2 parameters</li>
 </ul>
 
 <p><i>Note:
        Because of the possible presence of a semicolon in a URI (which is also used as separator of uploads in the TAP syntax),
        there could be a problem while splitting the uploads specified in "UPLOAD". In that case, it is strongly recommended to
        either encode the URI (in UTF-8) (i.e. ";" becomes "%3B") or to merely restrict the syntax to the DALI one. In this last case,
        the parameter "allowTAPSyntax" should be set to <i>false</i> and then all parameters should be submitted individually.
 </i></p></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>requestParams</code> - All parameters extracted from an HTTP request by a <a href="../../uws/service/request/RequestParser.html" title="interface in uws.service.request"><code>RequestParser</code></a>.</dd><dd><code>allowTAPSyntax</code> - <i>true</i> to allow a list of several upload items in one "UPLOAD" parameter value (each item separated by a semicolon),
                        <i>false</i> to forbid it (and so, multiple upload items shall be submitted individually).</dd><dd><code>fileManager</code> - The file manager to use in order to build a <a href="../../tap/parameters/DALIUpload.html" title="class in tap.parameters"><code>DALIUpload</code></a> objects from a URI.
                                <i>(a link to the file manager will be set in the <a href="../../tap/parameters/DALIUpload.html" title="class in tap.parameters"><code>DALIUpload</code></a> object in order to open it
                                whenever it will asked after its creation)</i></dd>
<dt><span class="strong">Returns:</span></dt><dd>List of all uploads specified with the DALI or TAP syntax.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../tap/TAPException.html" title="class in tap">TAPException</a></code> - If the syntax of an "UPLOAD" parameter is wrong.</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../uws/service/request/RequestParser.html#parse(javax.servlet.http.HttpServletRequest)"><code>RequestParser.parse(javax.servlet.http.HttpServletRequest)</code></a></dd></dl>
</li>
</ul>
<a name="fetchDALIUploads(java.util.ArrayList, java.util.ArrayList, java.lang.String, java.util.Map, boolean, uws.service.file.UWSFileManager)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>fetchDALIUploads</h4>
<pre>protected static&nbsp;void&nbsp;fetchDALIUploads(java.util.ArrayList&lt;<a href="../../tap/parameters/DALIUpload.html" title="class in tap.parameters">DALIUpload</a>&gt;&nbsp;uploads,
                    java.util.ArrayList&lt;java.lang.String&gt;&nbsp;usedFiles,
                    java.lang.String&nbsp;uploadParam,
                    java.util.Map&lt;java.lang.String,java.lang.Object&gt;&nbsp;parameters,
                    boolean&nbsp;allowTAPSyntax,
                    <a href="../../uws/service/file/UWSFileManager.html" title="interface in uws.service.file">UWSFileManager</a>&nbsp;fileManager)
                                throws <a href="../../tap/TAPException.html" title="class in tap">TAPException</a></pre>
<div class="block"><p>Fetch all uploads specified in the DALI/TAP "UPLOAD" parameter.
 The fetched <a href="../../tap/parameters/DALIUpload.html" title="class in tap.parameters"><code>DALIUpload</code></a>s are added in the given <code>ArrayList</code>.</p>
 
 <p><i>Note: A DALI upload can be either a URI or an inline file (specified as "param:{param-ref}").</i></p></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>uploads</code> - List of <a href="../../tap/parameters/DALIUpload.html" title="class in tap.parameters"><code>DALIUpload</code></a>s. <b>to update</b>.</dd><dd><code>usedFiles</code> - List of the the names of the referenced file parameters. <b>to update</b>.</dd><dd><code>uploadParam</code> - Value of the "UPLOAD" parameter.</dd><dd><code>parameters</code> - List of all extracted parameters (including <a href="../../uws/service/request/UploadFile.html" title="class in uws.service.request"><code>UploadFile</code></a>(s)).</dd><dd><code>allowTAPSyntax</code> - <i>true</i> to allow a list of several upload items in one "UPLOAD" parameter value (each item separated by a semicolon),
                        <i>false</i> to forbid it (and so, multiple upload items shall be submitted individually).</dd><dd><code>fileManager</code> - The file manager to use in order to build a <a href="../../tap/parameters/DALIUpload.html" title="class in tap.parameters"><code>DALIUpload</code></a> objects from a URI.
                                <i>(a link to the file manager will be set in the <a href="../../tap/parameters/DALIUpload.html" title="class in tap.parameters"><code>DALIUpload</code></a> object in order to open it
                                whenever it will asked after its creation)</i></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../tap/TAPException.html" title="class in tap">TAPException</a></code> - If the syntax of the given "UPLOAD" parameter is incorrect.</dd></dl>
</li>
</ul>
<a name="fetchDALIUpload(java.lang.String, java.util.Map, uws.service.file.UWSFileManager)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>fetchDALIUpload</h4>
<pre>protected static&nbsp;<a href="../../tap/parameters/DALIUpload.html" title="class in tap.parameters">DALIUpload</a>&nbsp;fetchDALIUpload(java.lang.String&nbsp;uploadParam,
                         java.util.Map&lt;java.lang.String,java.lang.Object&gt;&nbsp;parameters,
                         <a href="../../uws/service/file/UWSFileManager.html" title="interface in uws.service.file">UWSFileManager</a>&nbsp;fileManager)
                                     throws <a href="../../tap/TAPException.html" title="class in tap">TAPException</a></pre>
<div class="block">Fetch the single upload item (a pair with the syntax: "{label},{URI}".</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>uploadParam</code> - Value of the "UPLOAD" parameter. <i>A single upload item is expected ; that's to say something like "{label},{URI}".</i></dd><dd><code>parameters</code> - List of extracted parameters. The fetched LOB must be added as a new parameter in this map. <b>MUST not be NULL</b></dd><dd><code>fileManager</code> - The file manager to use in order to build a <a href="../../tap/parameters/DALIUpload.html" title="class in tap.parameters"><code>DALIUpload</code></a> objects from a URI.
                        <i>(a link to the file manager will be set in the <a href="../../tap/parameters/DALIUpload.html" title="class in tap.parameters"><code>DALIUpload</code></a> object in order to open it
                        whenever it will asked after its creation)</i></dd>
<dt><span class="strong">Returns:</span></dt><dd>The corresponding <a href="../../tap/parameters/DALIUpload.html" title="class in tap.parameters"><code>DALIUpload</code></a> object.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../tap/TAPException.html" title="class in tap">TAPException</a></code> - If the syntax of the given "UPLOAD" parameter is incorrect.</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../tap/parameters/DALIUpload.html#parseDALIParam(java.lang.String)"><code>parseDALIParam(String)</code></a>, 
<a href="../../tap/parameters/DALIUpload.html#buildDALIUpload(java.lang.String,%20java.lang.String,%20java.util.Map,%20uws.service.file.UWSFileManager)"><code>buildDALIUpload(String, String, Map, UWSFileManager)</code></a></dd></dl>
</li>
</ul>
<a name="parseDALIParam(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>parseDALIParam</h4>
<pre>protected static&nbsp;java.lang.String[]&nbsp;parseDALIParam(java.lang.String&nbsp;definition)
                                            throws <a href="../../tap/TAPException.html" title="class in tap">TAPException</a></pre>
<div class="block"><p>Extract the two parts (label and URI) of the given DALI parameter, and then, check their syntax.</p>
 
 <p><i><b>Important note:</b>
        It MUST be ensured before calling this function that the given DALI parameter is not NULL
        and contains at least one comma (,).
 </i></p>
 
 <p>
        The first comma found in the given string will be the separator of the two parts
        of the given DALI parameter: {label},{URI}
 </p>
 
 <p>
        The label part - {label} - must start with one letter and may be followed by a letter,
        a digit or an underscore. The corresponding regular expression is: [a-zA-Z][a-zA-Z0-9_]*
 </p>
 
 <p>
        The URI part - {URI} - must start with a scheme, followed by a colon (:) and then by several characters
        (no restriction). A scheme must start with one letter and may be followed by a letter,
        a digit, a plus (+), a dot (.) or an hyphen/minus (-). The corresponding regular expression is:
        [a-zA-Z][a-zA-Z0-9\+\.-]*
 </p></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>definition</code> - MUST BE A PAIR label,value</dd>
<dt><span class="strong">Returns:</span></dt><dd>An array of exactly 2 items: [0]=upload label/name, [1]=an URI. <i>(note: the special DALI syntax "param:..." is also a valid URI)</i></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../tap/TAPException.html" title="class in tap">TAPException</a></code> - If the given upload definition is not following the valid DALI syntax.</dd></dl>
</li>
</ul>
<a name="buildDALIUpload(java.lang.String, java.lang.String, java.util.Map, uws.service.file.UWSFileManager)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>buildDALIUpload</h4>
<pre>protected static final&nbsp;<a href="../../tap/parameters/DALIUpload.html" title="class in tap.parameters">DALIUpload</a>&nbsp;buildDALIUpload(java.lang.String&nbsp;label,
                         java.lang.String&nbsp;uri,
                         java.util.Map&lt;java.lang.String,java.lang.Object&gt;&nbsp;parameters,
                         <a href="../../uws/service/file/UWSFileManager.html" title="interface in uws.service.file">UWSFileManager</a>&nbsp;fileManager)
                                           throws <a href="../../tap/TAPException.html" title="class in tap">TAPException</a></pre>
<div class="block"><p>Build a <a href="../../tap/parameters/DALIUpload.html" title="class in tap.parameters"><code>DALIUpload</code></a> corresponding to the specified URI.</p>
 
 <p>
        If the URI starts, case-insensitively, with "param:", it is then a reference to another request parameter containing a file content.
        In this case, the file content has been already stored inside a local file and represented by an <a href="../../uws/service/request/UploadFile.html" title="class in uws.service.request"><code>UploadFile</code></a> instance in the map.
 </p>
 
 <p>
        If the URI does not start with "param:", the DALI upload is considered as a reference to a distant file which can be accessed using this URI.
        Any URI scheme is allowed here, but the given file manager should be able to interpret it and open a stream toward the referenced resource
        whenever it will be asked.
 </p>
 
 <p><i>Note:
        If the URI is not a parameter reference (i.e. started by "param:"), it will be decoded using <code>URLDecoder.decode(String, String)</code>
        (character encoding: UTF-8).
 </i></p></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>label</code> - Label of the <a href="../../tap/parameters/DALIUpload.html" title="class in tap.parameters"><code>DALIUpload</code></a> to build.</dd><dd><code>uri</code> - URI of the LOB. <b>MUST be NOT-NULL</b></dd><dd><code>parameters</code> - All parameters extracted from an HTTP request by a <a href="../../uws/service/request/RequestParser.html" title="interface in uws.service.request"><code>RequestParser</code></a>.</dd><dd><code>fileManager</code> - The file manager to use in order to build a <a href="../../tap/parameters/DALIUpload.html" title="class in tap.parameters"><code>DALIUpload</code></a> objects from a URI.
                        <i>(a link to the file manager will be set in the <a href="../../tap/parameters/DALIUpload.html" title="class in tap.parameters"><code>DALIUpload</code></a> object in order to open it
                        whenever it will asked after its creation)</i></dd>
<dt><span class="strong">Returns:</span></dt><dd>The corresponding <a href="../../tap/parameters/DALIUpload.html" title="class in tap.parameters"><code>DALIUpload</code></a> object.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../tap/TAPException.html" title="class in tap">TAPException</a></code> - If the parameter reference is broken or if the given URI has a wrong syntax.</dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/DALIUpload.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-files/index-1.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev Class</li>
<li><a href="../../tap/parameters/FormatController.html" title="class in tap.parameters"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../index.html?tap/parameters/DALIUpload.html" target="_top">Frames</a></li>
<li><a href="DALIUpload.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
