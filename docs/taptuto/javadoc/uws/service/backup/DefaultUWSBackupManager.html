<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_95) on Fri Jan 29 20:29:46 CET 2016 -->
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>DefaultUWSBackupManager</title>
<meta name="date" content="2016-01-29">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="DefaultUWSBackupManager";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/DefaultUWSBackupManager.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev Class</li>
<li><a href="../../../uws/service/backup/DefaultUWSBackupManager.JSONArrayReader.html" title="class in uws.service.backup"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?uws/service/backup/DefaultUWSBackupManager.html" target="_top">Frames</a></li>
<li><a href="DefaultUWSBackupManager.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">uws.service.backup</div>
<h2 title="Class DefaultUWSBackupManager" class="title">Class DefaultUWSBackupManager</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>uws.service.backup.DefaultUWSBackupManager</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../../uws/service/backup/UWSBackupManager.html" title="interface in uws.service.backup">UWSBackupManager</a></dd>
</dl>
<dl>
<dt>Direct Known Subclasses:</dt>
<dd><a href="../../../tap/backup/DefaultTAPBackupManager.html" title="class in tap.backup">DefaultTAPBackupManager</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="strong">DefaultUWSBackupManager</span>
extends java.lang.Object
implements <a href="../../../uws/service/backup/UWSBackupManager.html" title="interface in uws.service.backup">UWSBackupManager</a></pre>
<div class="block"><p>Default implementation of the interface <a href="../../../uws/service/backup/UWSBackupManager.html" title="interface in uws.service.backup"><code>UWSBackupManager</code></a>.</p>
 
 <p>
        With this class, a UWS can be saved and restored easily thanks to <a href="../../../uws/service/backup/DefaultUWSBackupManager.html#saveAll()"><code>saveAll()</code></a> and <a href="../../../uws/service/backup/DefaultUWSBackupManager.html#restoreAll()"><code>restoreAll()</code></a>.
        It is saved in JSON and in one or several files in function of the backup mode:
 </p>
 <ul>
        <li><u>by user</u>: one file for each user. The file contains all the information about the user and all the jobs he owns.</li>
        <li><u>in one file</u>: one file to describe all users and all the jobs.</li>
 </ul>
 
 <p>The backup frequency can also be changed and may have 2 special values:</p>
 <ul>
        <li><u><a href="../../../uws/service/backup/DefaultUWSBackupManager.html#AT_USER_ACTION"><code>AT_USER_ACTION</code></a> (=0)</u>: only the jobs of the user which has just created, destroyed, executed or stopped a job are saved. This frequency is possible only if the backup mode is <u>by user</u>.</li>
        <li><u><a href="../../../uws/service/backup/DefaultUWSBackupManager.html#MANUAL"><code>MANUAL</code></a> (=-1)</u>: you must call yourself the function <a href="../../../uws/service/backup/DefaultUWSBackupManager.html#saveAll()"><code>saveAll()</code></a> to save the UWS.</li>
 </ul>
 <p>Another positive value will be considered as the frequency (in milliseconds) of the automatic backup (= <a href="../../../uws/service/backup/DefaultUWSBackupManager.html#saveAll()"><code>saveAll()</code></a>).</p></div>
<dl><dt><span class="strong">Version:</span></dt>
  <dd>4.1 (12/2014)</dd>
<dt><span class="strong">Author:</span></dt>
  <dd>Gr&eacute;gory Mantelet (CDS;ARI)</dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested_class_summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected static class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../uws/service/backup/DefaultUWSBackupManager.JSONArrayReader.html" title="class in uws.service.backup">DefaultUWSBackupManager.JSONArrayReader</a></strong></code>
<div class="block">Lets reading a JSON array from a <a href="../../../org/json/JSONTokener.html" title="class in org.json"><code>JSONTokener</code></a> (that's to directly from a file)
 as an iterator <b>which returns all items which MUST BE <a href="../../../org/json/JSONObject.html" title="class in org.json"><code>JSONObject</code></a>s</b>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected static class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../uws/service/backup/DefaultUWSBackupManager.JSONObjectReader.html" title="class in uws.service.backup">DefaultUWSBackupManager.JSONObjectReader</a></strong></code>
<div class="block">Lets reading a JSON object from a <a href="../../../org/json/JSONTokener.html" title="class in org.json"><code>JSONTokener</code></a> (that's to say directly from a file),
 as an iterator which returns all the keys.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected static class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../uws/service/backup/DefaultUWSBackupManager.SingleInputIterator.html" title="class in uws.service.backup">DefaultUWSBackupManager.SingleInputIterator</a></strong></code>
<div class="block">An iterator of input streams with ONLY ONE input stream.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static long</code></td>
<td class="colLast"><code><strong><a href="../../../uws/service/backup/DefaultUWSBackupManager.html#AT_USER_ACTION">AT_USER_ACTION</a></strong></code>
<div class="block">Special frequency to mean that this manager wait a user action (create, update, start, abort, destruction) to save the jobs of this user.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected long</code></td>
<td class="colLast"><code><strong><a href="../../../uws/service/backup/DefaultUWSBackupManager.html#backupFreq">backupFreq</a></strong></code>
<div class="block">Backup frequency (in milliseconds).</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected boolean</code></td>
<td class="colLast"><code><strong><a href="../../../uws/service/backup/DefaultUWSBackupManager.html#byUser">byUser</a></strong></code>
<div class="block">Backup mode: one file by user or one file for all jobs and users.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static long</code></td>
<td class="colLast"><code><strong><a href="../../../uws/service/backup/DefaultUWSBackupManager.html#DEFAULT_FREQUENCY">DEFAULT_FREQUENCY</a></strong></code>
<div class="block">Default backup frequency.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected boolean</code></td>
<td class="colLast"><code><strong><a href="../../../uws/service/backup/DefaultUWSBackupManager.html#enabled">enabled</a></strong></code>
<div class="block">Tells whether the backup (and particularly the automatic one) of the associated UWS is enabled or not.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected java.util.Date</code></td>
<td class="colLast"><code><strong><a href="../../../uws/service/backup/DefaultUWSBackupManager.html#lastBackup">lastBackup</a></strong></code>
<div class="block">Date of the last backup.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected java.util.Date</code></td>
<td class="colLast"><code><strong><a href="../../../uws/service/backup/DefaultUWSBackupManager.html#lastRestoration">lastRestoration</a></strong></code>
<div class="block">Date of the last restoration.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static long</code></td>
<td class="colLast"><code><strong><a href="../../../uws/service/backup/DefaultUWSBackupManager.html#MANUAL">MANUAL</a></strong></code>
<div class="block">Special frequency to mean that this manager will NOT save automatically the UWS.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected java.util.Timer</code></td>
<td class="colLast"><code><strong><a href="../../../uws/service/backup/DefaultUWSBackupManager.html#timAutoBackup">timAutoBackup</a></strong></code>
<div class="block">Timer which saves the backup each <i>backupFreq</i> milliseconds.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected <a href="../../../uws/service/UWS.html" title="interface in uws.service">UWS</a></code></td>
<td class="colLast"><code><strong><a href="../../../uws/service/backup/DefaultUWSBackupManager.html#uws">uws</a></strong></code>
<div class="block">The UWS to restore/save.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../uws/service/backup/DefaultUWSBackupManager.html#DefaultUWSBackupManager(uws.service.UWS)">DefaultUWSBackupManager</a></strong>(<a href="../../../uws/service/UWS.html" title="interface in uws.service">UWS</a>&nbsp;uws)</code>
<div class="block">Builds a backup manager in the mode "auto": one file for all users and all jobs, and the backup
 is done all minutes (see <a href="../../../uws/service/backup/DefaultUWSBackupManager.html#DEFAULT_FREQUENCY"><code>DEFAULT_FREQUENCY</code></a>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colOne"><code><strong><a href="../../../uws/service/backup/DefaultUWSBackupManager.html#DefaultUWSBackupManager(uws.service.UWS,%20boolean)">DefaultUWSBackupManager</a></strong>(<a href="../../../uws/service/UWS.html" title="interface in uws.service">UWS</a>&nbsp;uws,
                       boolean&nbsp;byUser)</code>
<div class="block">Builds a backup manager in the given mode: "by user" (one file for each user and the backup is done at each user action)
 or not (one file for all users and all jobs and the backup is done all minutes (see <a href="../../../uws/service/backup/DefaultUWSBackupManager.html#DEFAULT_FREQUENCY"><code>DEFAULT_FREQUENCY</code></a>)).</div>
</td>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../uws/service/backup/DefaultUWSBackupManager.html#DefaultUWSBackupManager(uws.service.UWS,%20boolean,%20long)">DefaultUWSBackupManager</a></strong>(<a href="../../../uws/service/UWS.html" title="interface in uws.service">UWS</a>&nbsp;uws,
                       boolean&nbsp;byUser,
                       long&nbsp;frequency)</code>
<div class="block">Builds a backup manager in the given mode and with the given frequency.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colOne"><code><strong><a href="../../../uws/service/backup/DefaultUWSBackupManager.html#DefaultUWSBackupManager(uws.service.UWS,%20long)">DefaultUWSBackupManager</a></strong>(<a href="../../../uws/service/UWS.html" title="interface in uws.service">UWS</a>&nbsp;uws,
                       long&nbsp;frequency)</code>
<div class="block">Builds a backup manager in the mode "auto" or "manual": one file for all users and all jobs, and the backup
 is done at the given frequency.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../uws/service/backup/DefaultUWSBackupManager.html#getBackupFreq()">getBackupFreq</a></strong>()</code>
<div class="block">Gets the backup frequency.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected <a href="../../../uws/job/ErrorSummary.html" title="class in uws.job">ErrorSummary</a></code></td>
<td class="colLast"><code><strong><a href="../../../uws/service/backup/DefaultUWSBackupManager.html#getError(org.json.JSONObject)">getError</a></strong>(<a href="../../../org/json/JSONObject.html" title="class in org.json">JSONObject</a>&nbsp;obj)</code>
<div class="block">Builds the error summary corresponding to the given JSON object.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="../../../org/json/JSONObject.html" title="class in org.json">JSONObject</a></code></td>
<td class="colLast"><code><strong><a href="../../../uws/service/backup/DefaultUWSBackupManager.html#getJSONJob(uws.job.UWSJob,%20java.lang.String)">getJSONJob</a></strong>(<a href="../../../uws/job/UWSJob.html" title="class in uws.job">UWSJob</a>&nbsp;job,
          java.lang.String&nbsp;jlName)</code>
<div class="block">Serializes the given job into a JSON object.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected <a href="../../../org/json/JSONObject.html" title="class in org.json">JSONObject</a></code></td>
<td class="colLast"><code><strong><a href="../../../uws/service/backup/DefaultUWSBackupManager.html#getJSONUser(uws.job.user.JobOwner)">getJSONUser</a></strong>(<a href="../../../uws/job/user/JobOwner.html" title="interface in uws.job.user">JobOwner</a>&nbsp;user)</code>
<div class="block">Serializes the given user into a JSON object.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>java.util.Date</code></td>
<td class="colLast"><code><strong><a href="../../../uws/service/backup/DefaultUWSBackupManager.html#getLastBackup()">getLastBackup</a></strong>()</code>
<div class="block">Gets the date of the last backup.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>java.util.Date</code></td>
<td class="colLast"><code><strong><a href="../../../uws/service/backup/DefaultUWSBackupManager.html#getLastRestoration()">getLastRestoration</a></strong>()</code>
<div class="block">Gets the date of the last restoration</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../uws/service/log/UWSLog.html" title="interface in uws.service.log">UWSLog</a></code></td>
<td class="colLast"><code><strong><a href="../../../uws/service/backup/DefaultUWSBackupManager.html#getLogger()">getLogger</a></strong>()</code>
<div class="block">Gets the logger of its UWS, or the default one if it is unknown.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected java.util.Map&lt;java.lang.String,java.lang.Object&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../uws/service/backup/DefaultUWSBackupManager.html#getParameters(org.json.JSONObject)">getParameters</a></strong>(<a href="../../../org/json/JSONObject.html" title="class in org.json">JSONObject</a>&nbsp;obj)</code>
<div class="block">Builds the list of parameters corresponding to the given JSON object.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="../../../uws/job/Result.html" title="class in uws.job">Result</a></code></td>
<td class="colLast"><code><strong><a href="../../../uws/service/backup/DefaultUWSBackupManager.html#getResult(org.json.JSONObject)">getResult</a></strong>(<a href="../../../org/json/JSONObject.html" title="class in org.json">JSONObject</a>&nbsp;obj)</code>
<div class="block">Builds the result corresponding to the given JSON object.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected java.util.ArrayList&lt;<a href="../../../uws/job/Result.html" title="class in uws.job">Result</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../uws/service/backup/DefaultUWSBackupManager.html#getResults(org.json.JSONArray)">getResults</a></strong>(<a href="../../../org/json/JSONArray.html" title="class in org.json">JSONArray</a>&nbsp;array)</code>
<div class="block">Builds the list of results corresponding to the given JSON array.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="../../../uws/service/request/UploadFile.html" title="class in uws.service.request">UploadFile</a></code></td>
<td class="colLast"><code><strong><a href="../../../uws/service/backup/DefaultUWSBackupManager.html#getUploadFile(org.json.JSONObject)">getUploadFile</a></strong>(<a href="../../../org/json/JSONObject.html" title="class in org.json">JSONObject</a>&nbsp;obj)</code>
<div class="block">Build the upload file corresponding to the given JSON object.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected <a href="../../../org/json/JSONObject.html" title="class in org.json">JSONObject</a></code></td>
<td class="colLast"><code><strong><a href="../../../uws/service/backup/DefaultUWSBackupManager.html#getUploadJson(uws.service.request.UploadFile)">getUploadJson</a></strong>(<a href="../../../uws/service/request/UploadFile.html" title="class in uws.service.request">UploadFile</a>&nbsp;upl)</code>
<div class="block">Get the JSON representation of the given <a href="../../../uws/service/request/UploadFile.html" title="class in uws.service.request"><code>UploadFile</code></a>.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="../../../uws/job/user/JobOwner.html" title="interface in uws.job.user">JobOwner</a></code></td>
<td class="colLast"><code><strong><a href="../../../uws/service/backup/DefaultUWSBackupManager.html#getUser(org.json.JSONObject)">getUser</a></strong>(<a href="../../../org/json/JSONObject.html" title="class in org.json">JSONObject</a>&nbsp;json)</code>
<div class="block">Builds the instance of <a href="../../../uws/job/user/JobOwner.html" title="interface in uws.job.user"><code>JobOwner</code></a> corresponding to the given JSON object.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../uws/service/backup/DefaultUWSBackupManager.html#isEnabled()">isEnabled</a></strong>()</code>
<div class="block">Tells whether this backup manager is enabled or not.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int[]</code></td>
<td class="colLast"><code><strong><a href="../../../uws/service/backup/DefaultUWSBackupManager.html#restoreAll()">restoreAll</a></strong>()</code>
<div class="block">Restore all jobs list and all information about the jobs owners.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected boolean</code></td>
<td class="colLast"><code><strong><a href="../../../uws/service/backup/DefaultUWSBackupManager.html#restoreJob(org.json.JSONObject,%20java.util.Map)">restoreJob</a></strong>(<a href="../../../org/json/JSONObject.html" title="class in org.json">JSONObject</a>&nbsp;json,
          java.util.Map&lt;java.lang.String,<a href="../../../uws/job/user/JobOwner.html" title="interface in uws.job.user">JobOwner</a>&gt;&nbsp;users)</code>
<div class="block">Builds the job corresponding to the given JSON object and then restore it in the UWS.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../uws/service/backup/DefaultUWSBackupManager.html#restoreOtherJobParams(org.json.JSONObject,%20uws.job.UWSJob)">restoreOtherJobParams</a></strong>(<a href="../../../org/json/JSONObject.html" title="class in org.json">JSONObject</a>&nbsp;json,
                     <a href="../../../uws/job/UWSJob.html" title="class in uws.job">UWSJob</a>&nbsp;job)</code>
<div class="block">
        Restores other job parameters, either from the given JSON object or from the parameters map of the given job.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int[]</code></td>
<td class="colLast"><code><strong><a href="../../../uws/service/backup/DefaultUWSBackupManager.html#saveAll()">saveAll</a></strong>()</code>
<div class="block">Save all jobs lists and all information about the jobs owners.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int[]</code></td>
<td class="colLast"><code><strong><a href="../../../uws/service/backup/DefaultUWSBackupManager.html#saveOwner(uws.job.user.JobOwner)">saveOwner</a></strong>(<a href="../../../uws/job/user/JobOwner.html" title="interface in uws.job.user">JobOwner</a>&nbsp;user)</code>
<div class="block">Save ONLY the jobs of the given user and all information about this user.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected int[]</code></td>
<td class="colLast"><code><strong><a href="../../../uws/service/backup/DefaultUWSBackupManager.html#saveOwner(uws.job.user.JobOwner,%20boolean)">saveOwner</a></strong>(<a href="../../../uws/job/user/JobOwner.html" title="interface in uws.job.user">JobOwner</a>&nbsp;user,
         boolean&nbsp;fromSaveAll)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../uws/service/backup/DefaultUWSBackupManager.html#setBackupFreq(long)">setBackupFreq</a></strong>(long&nbsp;freq)</code>
<div class="block">Sets the backup frequency.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../uws/service/backup/DefaultUWSBackupManager.html#setEnabled(boolean)">setEnabled</a></strong>(boolean&nbsp;enabled)</code>
<div class="block">Enables/Disables the backup of the associated UWS.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="AT_USER_ACTION">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>AT_USER_ACTION</h4>
<pre>public static final&nbsp;long AT_USER_ACTION</pre>
<div class="block">Special frequency to mean that this manager wait a user action (create, update, start, abort, destruction) to save the jobs of this user.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#uws.service.backup.DefaultUWSBackupManager.AT_USER_ACTION">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="MANUAL">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>MANUAL</h4>
<pre>public static final&nbsp;long MANUAL</pre>
<div class="block">Special frequency to mean that this manager will NOT save automatically the UWS. The function <a href="../../../uws/service/backup/DefaultUWSBackupManager.html#saveAll()"><code>saveAll()</code></a> MUST be explicitly called.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#uws.service.backup.DefaultUWSBackupManager.MANUAL">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="DEFAULT_FREQUENCY">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DEFAULT_FREQUENCY</h4>
<pre>public static final&nbsp;long DEFAULT_FREQUENCY</pre>
<div class="block">Default backup frequency. 60000ms = 60s = 1min</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#uws.service.backup.DefaultUWSBackupManager.DEFAULT_FREQUENCY">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="lastRestoration">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lastRestoration</h4>
<pre>protected&nbsp;java.util.Date lastRestoration</pre>
<div class="block">Date of the last restoration.</div>
</li>
</ul>
<a name="lastBackup">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lastBackup</h4>
<pre>protected&nbsp;java.util.Date lastBackup</pre>
<div class="block">Date of the last backup.</div>
</li>
</ul>
<a name="uws">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>uws</h4>
<pre>protected final&nbsp;<a href="../../../uws/service/UWS.html" title="interface in uws.service">UWS</a> uws</pre>
<div class="block">The UWS to restore/save.</div>
</li>
</ul>
<a name="enabled">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>enabled</h4>
<pre>protected&nbsp;boolean enabled</pre>
<div class="block">Tells whether the backup (and particularly the automatic one) of the associated UWS is enabled or not.</div>
</li>
</ul>
<a name="byUser">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>byUser</h4>
<pre>protected final&nbsp;boolean byUser</pre>
<div class="block">Backup mode: one file by user or one file for all jobs and users.</div>
</li>
</ul>
<a name="backupFreq">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>backupFreq</h4>
<pre>protected&nbsp;long backupFreq</pre>
<div class="block">Backup frequency (in milliseconds).</div>
</li>
</ul>
<a name="timAutoBackup">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>timAutoBackup</h4>
<pre>protected&nbsp;java.util.Timer timAutoBackup</pre>
<div class="block">Timer which saves the backup each <i>backupFreq</i> milliseconds.</div>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="DefaultUWSBackupManager(uws.service.UWS)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DefaultUWSBackupManager</h4>
<pre>public&nbsp;DefaultUWSBackupManager(<a href="../../../uws/service/UWS.html" title="interface in uws.service">UWS</a>&nbsp;uws)</pre>
<div class="block">Builds a backup manager in the mode "auto": one file for all users and all jobs, and the backup
 is done all minutes (see <a href="../../../uws/service/backup/DefaultUWSBackupManager.html#DEFAULT_FREQUENCY"><code>DEFAULT_FREQUENCY</code></a>.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>uws</code> - The UWS to save/restore.</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../../uws/service/backup/DefaultUWSBackupManager.html#DefaultUWSBackupManager(uws.service.UWS,%20long)"><code>DefaultUWSBackupManager(UWS, long)</code></a></dd></dl>
</li>
</ul>
<a name="DefaultUWSBackupManager(uws.service.UWS, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DefaultUWSBackupManager</h4>
<pre>public&nbsp;DefaultUWSBackupManager(<a href="../../../uws/service/UWS.html" title="interface in uws.service">UWS</a>&nbsp;uws,
                       long&nbsp;frequency)</pre>
<div class="block"><p>Builds a backup manager in the mode "auto" or "manual": one file for all users and all jobs, and the backup
 is done at the given frequency.</p>
 
 <p>If the given frequency is 0 or negative (see <a href="../../../uws/service/backup/DefaultUWSBackupManager.html#MANUAL"><code>MANUAL</code></a>), the backup will not be done automatically. You must manually
 save the UWS thanks to the function <a href="../../../uws/service/backup/DefaultUWSBackupManager.html#saveAll()"><code>saveAll()</code></a>.</p>
 
 <p>If the given frequency is positive, the backup will be done automatically at the given frequency.</p></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>uws</code> - The UWS to save/restore.</dd><dd><code>frequency</code> - The backup frequency (in ms ; MUST BE positive and different from 0. If negative or 0, the frequency will be automatically set to <a href="../../../uws/service/backup/DefaultUWSBackupManager.html#DEFAULT_FREQUENCY"><code>DEFAULT_FREQUENCY</code></a>).</dd></dl>
</li>
</ul>
<a name="DefaultUWSBackupManager(uws.service.UWS, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DefaultUWSBackupManager</h4>
<pre>public&nbsp;DefaultUWSBackupManager(<a href="../../../uws/service/UWS.html" title="interface in uws.service">UWS</a>&nbsp;uws,
                       boolean&nbsp;byUser)
                        throws <a href="../../../uws/UWSException.html" title="class in uws">UWSException</a></pre>
<div class="block">Builds a backup manager in the given mode: "by user" (one file for each user and the backup is done at each user action)
 or not (one file for all users and all jobs and the backup is done all minutes (see <a href="../../../uws/service/backup/DefaultUWSBackupManager.html#DEFAULT_FREQUENCY"><code>DEFAULT_FREQUENCY</code></a>)).</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>uws</code> - The UWS to save/restore.</dd><dd><code>byUser</code> - Backup mode.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../uws/UWSException.html" title="class in uws">UWSException</a></code> - If the user identification is disabled (that's to say, if the given UWS has no UserIdentifier) while the parameter <i>byUser</i> is <i>true</i>.</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../../uws/service/backup/DefaultUWSBackupManager.html#DefaultUWSBackupManager(uws.service.UWS,%20boolean,%20long)"><code>DefaultUWSBackupManager(UWS, boolean, long)</code></a></dd></dl>
</li>
</ul>
<a name="DefaultUWSBackupManager(uws.service.UWS, boolean, long)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>DefaultUWSBackupManager</h4>
<pre>public&nbsp;DefaultUWSBackupManager(<a href="../../../uws/service/UWS.html" title="interface in uws.service">UWS</a>&nbsp;uws,
                       boolean&nbsp;byUser,
                       long&nbsp;frequency)
                        throws <a href="../../../uws/UWSException.html" title="class in uws">UWSException</a></pre>
<div class="block">Builds a backup manager in the given mode and with the given frequency.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>uws</code> - The UWS to save/restore.</dd><dd><code>byUser</code> - Backup mode (<i>true</i> means one file for each user and <i>false</i>, one file for all users and jobs).</dd><dd><code>frequency</code> - Backup frequency (<a href="../../../uws/service/backup/DefaultUWSBackupManager.html#AT_USER_ACTION"><code>AT_USER_ACTION</code></a>, <a href="../../../uws/service/backup/DefaultUWSBackupManager.html#MANUAL"><code>MANUAL</code></a>, <a href="../../../uws/service/backup/DefaultUWSBackupManager.html#DEFAULT_FREQUENCY"><code>DEFAULT_FREQUENCY</code></a>, or a positive value).</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../uws/UWSException.html" title="class in uws">UWSException</a></code> - If the user identification is disabled (that's to say, if the given UWS has no UserIdentifier) while the parameter <i>byUser</i> is <i>true</i>.</dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="isEnabled()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isEnabled</h4>
<pre>public final&nbsp;boolean&nbsp;isEnabled()</pre>
<div class="block">Tells whether this backup manager is enabled or not.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd><i>true</i> if the backup is enabled, <i>false</i> otherwise.</dd></dl>
</li>
</ul>
<a name="setEnabled(boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setEnabled</h4>
<pre>public final&nbsp;void&nbsp;setEnabled(boolean&nbsp;enabled)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../uws/service/backup/UWSBackupManager.html#setEnabled(boolean)">UWSBackupManager</a></code></strong></div>
<div class="block">Enables/Disables the backup of the associated UWS.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../uws/service/backup/UWSBackupManager.html#setEnabled(boolean)">setEnabled</a></code>&nbsp;in interface&nbsp;<code><a href="../../../uws/service/backup/UWSBackupManager.html" title="interface in uws.service.backup">UWSBackupManager</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>enabled</code> - <i>true</i> to enable the backup, <i>false</i> otherwise.</dd></dl>
</li>
</ul>
<a name="getBackupFreq()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBackupFreq</h4>
<pre>public final&nbsp;long&nbsp;getBackupFreq()</pre>
<div class="block">Gets the backup frequency.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>The backup frequency (in milliseconds).</dd></dl>
</li>
</ul>
<a name="setBackupFreq(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setBackupFreq</h4>
<pre>public final&nbsp;void&nbsp;setBackupFreq(long&nbsp;freq)</pre>
<div class="block"><p>Sets the backup frequency.</p>
 
 <p>
        <i><u>note 1:</u> A negative frequency will be interpreted as "manual"..
        that's to say you will have to call yourself the <a href="../../../uws/service/backup/DefaultUWSBackupManager.html#saveAll()"><code>saveAll()</code></a> method to save the UWS.
 </i></p>
 <p>
        <i><u>note 2:</u> Nothing will be done if the given frequency is <a href="../../../uws/service/backup/DefaultUWSBackupManager.html#AT_USER_ACTION"><code>AT_USER_ACTION</code></a> although the current backup mode is "by user".
 </i></p></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>freq</code> - The new backup frequency (in milliseconds) (<a href="../../../uws/service/backup/DefaultUWSBackupManager.html#AT_USER_ACTION"><code>AT_USER_ACTION</code></a>, <a href="../../../uws/service/backup/DefaultUWSBackupManager.html#MANUAL"><code>MANUAL</code></a>, <a href="../../../uws/service/backup/DefaultUWSBackupManager.html#DEFAULT_FREQUENCY"><code>DEFAULT_FREQUENCY</code></a> or any other positive value).</dd></dl>
</li>
</ul>
<a name="getLastRestoration()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLastRestoration</h4>
<pre>public final&nbsp;java.util.Date&nbsp;getLastRestoration()</pre>
<div class="block">Gets the date of the last restoration</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>The date of the last restoration (MAY BE NULL).</dd></dl>
</li>
</ul>
<a name="getLastBackup()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLastBackup</h4>
<pre>public final&nbsp;java.util.Date&nbsp;getLastBackup()</pre>
<div class="block">Gets the date of the last backup.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>The date of the last backup (MAY BE NULL).</dd></dl>
</li>
</ul>
<a name="getLogger()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLogger</h4>
<pre>public&nbsp;<a href="../../../uws/service/log/UWSLog.html" title="interface in uws.service.log">UWSLog</a>&nbsp;getLogger()</pre>
<div class="block">Gets the logger of its UWS, or the default one if it is unknown.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>A logger.</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../../uws/service/UWS.html#getLogger()"><code>UWS.getLogger()</code></a>, 
<a href="../../../uws/UWSToolBox.html#getDefaultLogger()"><code>UWSToolBox.getDefaultLogger()</code></a></dd></dl>
</li>
</ul>
<a name="saveAll()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>saveAll</h4>
<pre>public&nbsp;int[]&nbsp;saveAll()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../uws/service/backup/UWSBackupManager.html#saveAll()">UWSBackupManager</a></code></strong></div>
<div class="block">Save all jobs lists and all information about the jobs owners.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../uws/service/backup/UWSBackupManager.html#saveAll()">saveAll</a></code>&nbsp;in interface&nbsp;<code><a href="../../../uws/service/backup/UWSBackupManager.html" title="interface in uws.service.backup">UWSBackupManager</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>An array with the following information: number of saved jobs, number of all jobs, number of saved users and number of all users.
                        <i>null</i> or an empty array is returned if there is a grave error while saving the whole UWS or the backup is disabled.</dd></dl>
</li>
</ul>
<a name="saveOwner(uws.job.user.JobOwner)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>saveOwner</h4>
<pre>public&nbsp;int[]&nbsp;saveOwner(<a href="../../../uws/job/user/JobOwner.html" title="interface in uws.job.user">JobOwner</a>&nbsp;user)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../uws/service/backup/UWSBackupManager.html#saveOwner(uws.job.user.JobOwner)">UWSBackupManager</a></code></strong></div>
<div class="block">Save ONLY the jobs of the given user and all information about this user.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../uws/service/backup/UWSBackupManager.html#saveOwner(uws.job.user.JobOwner)">saveOwner</a></code>&nbsp;in interface&nbsp;<code><a href="../../../uws/service/backup/UWSBackupManager.html" title="interface in uws.service.backup">UWSBackupManager</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>An array with the following information: number of saved jobs, number of all jobs.
                        <i>null</i> or an empty array is returned if there is a grave error while saving the whole UWS or the backup is disabled.</dd></dl>
</li>
</ul>
<a name="saveOwner(uws.job.user.JobOwner, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>saveOwner</h4>
<pre>protected&nbsp;int[]&nbsp;saveOwner(<a href="../../../uws/job/user/JobOwner.html" title="interface in uws.job.user">JobOwner</a>&nbsp;user,
              boolean&nbsp;fromSaveAll)</pre>
</li>
</ul>
<a name="getJSONUser(uws.job.user.JobOwner)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getJSONUser</h4>
<pre>protected&nbsp;<a href="../../../org/json/JSONObject.html" title="class in org.json">JSONObject</a>&nbsp;getJSONUser(<a href="../../../uws/job/user/JobOwner.html" title="interface in uws.job.user">JobOwner</a>&nbsp;user)
                          throws <a href="../../../org/json/JSONException.html" title="class in org.json">JSONException</a></pre>
<div class="block"><p>Serializes the given user into a JSON object.</p>
 
 <pre>
 {
        "id": "...",
        "pseudo": "...",
        ...
 }
 </pre>
 <p>
        <i><u>note</u>:
        the last suspension points mean that other user data may be added into this JSON object.
        These other user data to save MUST BE given by <a href="../../../uws/job/user/JobOwner.html#getDataToSave()"><code>JobOwner.getDataToSave()</code></a>.
 </i></p></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>user</code> - The user to save.</dd>
<dt><span class="strong">Returns:</span></dt><dd>Its JSON representation.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../org/json/JSONException.html" title="class in org.json">JSONException</a></code> - If there is an error while building the JSON object.</dd></dl>
</li>
</ul>
<a name="getJSONJob(uws.job.UWSJob, java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getJSONJob</h4>
<pre>protected&nbsp;<a href="../../../org/json/JSONObject.html" title="class in org.json">JSONObject</a>&nbsp;getJSONJob(<a href="../../../uws/job/UWSJob.html" title="class in uws.job">UWSJob</a>&nbsp;job,
                    java.lang.String&nbsp;jlName)
                         throws <a href="../../../uws/UWSException.html" title="class in uws">UWSException</a>,
                                <a href="../../../org/json/JSONException.html" title="class in org.json">JSONException</a></pre>
<div class="block"><p>Serializes the given job into a JSON object.</p>
 
 <p>
        <i><u>note</u>:
        the structure of the returned JSON object is decided by <a href="../../../org/json/Json4Uws.html#getJson(uws.job.UWSJob)"><code>Json4Uws.getJson(UWSJob)</code></a>.
        Only one attribute is added: "jobListName".
 </i></p></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>job</code> - The job to save.</dd><dd><code>jlName</code> - Name of the jobs list containing the given job.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The JSON representation of the given job.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../uws/UWSException.html" title="class in uws">UWSException</a></code> - If there is an error while getting job parameters and serializing them.</dd>
<dd><code><a href="../../../org/json/JSONException.html" title="class in org.json">JSONException</a></code> - If there is an error while building the JSON object.</dd></dl>
</li>
</ul>
<a name="getUploadJson(uws.service.request.UploadFile)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getUploadJson</h4>
<pre>protected&nbsp;<a href="../../../org/json/JSONObject.html" title="class in org.json">JSONObject</a>&nbsp;getUploadJson(<a href="../../../uws/service/request/UploadFile.html" title="class in uws.service.request">UploadFile</a>&nbsp;upl)
                            throws <a href="../../../org/json/JSONException.html" title="class in org.json">JSONException</a></pre>
<div class="block">Get the JSON representation of the given <a href="../../../uws/service/request/UploadFile.html" title="class in uws.service.request"><code>UploadFile</code></a>.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>upl</code> - The uploaded file to serialize in JSON.</dd>
<dt><span class="strong">Returns:</span></dt><dd>Its JSON representation.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../org/json/JSONException.html" title="class in org.json">JSONException</a></code> - If there is an error while building the JSON object.</dd><dt><span class="strong">Since:</span></dt>
  <dd>4.1</dd></dl>
</li>
</ul>
<a name="restoreAll()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>restoreAll</h4>
<pre>public&nbsp;int[]&nbsp;restoreAll()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../uws/service/backup/UWSBackupManager.html#restoreAll()">UWSBackupManager</a></code></strong></div>
<div class="block">Restore all jobs list and all information about the jobs owners.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../uws/service/backup/UWSBackupManager.html#restoreAll()">restoreAll</a></code>&nbsp;in interface&nbsp;<code><a href="../../../uws/service/backup/UWSBackupManager.html" title="interface in uws.service.backup">UWSBackupManager</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>An array with the following information: number of restored jobs, number of all jobs, number of restored users and number of all users.
                        <i>null</i> or an empty array is returned if there is a grave error while saving the whole UWS.</dd></dl>
</li>
</ul>
<a name="getUser(org.json.JSONObject)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getUser</h4>
<pre>protected&nbsp;<a href="../../../uws/job/user/JobOwner.html" title="interface in uws.job.user">JobOwner</a>&nbsp;getUser(<a href="../../../org/json/JSONObject.html" title="class in org.json">JSONObject</a>&nbsp;json)
                    throws <a href="../../../uws/UWSException.html" title="class in uws">UWSException</a></pre>
<div class="block">Builds the instance of <a href="../../../uws/job/user/JobOwner.html" title="interface in uws.job.user"><code>JobOwner</code></a> corresponding to the given JSON object.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>json</code> - JSON representation of the user to build.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The corresponding instance of <a href="../../../uws/job/user/JobOwner.html" title="interface in uws.job.user"><code>JobOwner</code></a> or <i>null</i> if the given object is empty.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../uws/UWSException.html" title="class in uws">UWSException</a></code> - If the "id" parameter is missing (a user MUST have an id ; warning: the case sensitivity is enabled only for this attribute).</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../../uws/job/user/JobOwner.html#restoreData(java.util.Map)"><code>JobOwner.restoreData(Map)</code></a></dd></dl>
</li>
</ul>
<a name="restoreJob(org.json.JSONObject, java.util.Map)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>restoreJob</h4>
<pre>protected&nbsp;boolean&nbsp;restoreJob(<a href="../../../org/json/JSONObject.html" title="class in org.json">JSONObject</a>&nbsp;json,
                 java.util.Map&lt;java.lang.String,<a href="../../../uws/job/user/JobOwner.html" title="interface in uws.job.user">JobOwner</a>&gt;&nbsp;users)
                      throws <a href="../../../uws/UWSException.html" title="class in uws">UWSException</a></pre>
<div class="block">Builds the job corresponding to the given JSON object and then restore it in the UWS.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>json</code> - The JSON representation of the job to restore.</dd><dd><code>users</code> - The list of all fetched users.</dd>
<dt><span class="strong">Returns:</span></dt><dd><i>true</i> if the corresponding job has been successfully restored, <i>false</i> otherwise.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../uws/UWSException.html" title="class in uws">UWSException</a></code> - If the job ID or the job list name is missing,
                                                or if the job list name is incorrect,
                                                or if there is an error with "parameters", "error" and "results".</dd></dl>
</li>
</ul>
<a name="restoreOtherJobParams(org.json.JSONObject, uws.job.UWSJob)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>restoreOtherJobParams</h4>
<pre>protected&nbsp;void&nbsp;restoreOtherJobParams(<a href="../../../org/json/JSONObject.html" title="class in org.json">JSONObject</a>&nbsp;json,
                         <a href="../../../uws/job/UWSJob.html" title="class in uws.job">UWSJob</a>&nbsp;job)
                              throws <a href="../../../uws/UWSException.html" title="class in uws">UWSException</a></pre>
<div class="block"><p>
        Restores other job parameters, either from the given JSON object or from the parameters map of the given job.
        The job is supposed to be updated after the call of this function.
 </p>
 
 <p><i><u>note:</u> By default, this function does nothing ! It is called by <a href="../../../uws/service/backup/DefaultUWSBackupManager.html#restoreJob(org.json.JSONObject,%20java.util.Map)"><code>restoreJob(JSONObject, Map)</code></a>
 just after the default restoration from the given JSON and just before to add the job in its dedicated jobs list.</i></p></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>json</code> - JSON backup of the given job.</dd><dd><code>job</code> - Default restoration of the job.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../uws/UWSException.html" title="class in uws">UWSException</a></code> - If there is an error while restoring other job parameters.</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../../uws/service/backup/DefaultUWSBackupManager.html#restoreJob(org.json.JSONObject,%20java.util.Map)"><code>restoreJob(JSONObject, Map)</code></a></dd></dl>
</li>
</ul>
<a name="getParameters(org.json.JSONObject)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getParameters</h4>
<pre>protected&nbsp;java.util.Map&lt;java.lang.String,java.lang.Object&gt;&nbsp;getParameters(<a href="../../../org/json/JSONObject.html" title="class in org.json">JSONObject</a>&nbsp;obj)</pre>
<div class="block">Builds the list of parameters corresponding to the given JSON object.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>obj</code> - The JSON representation of a parameters list.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The corresponding list of parameters
                                                        or <i>null</i> if the given object is empty.</dd></dl>
</li>
</ul>
<a name="getUploadFile(org.json.JSONObject)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getUploadFile</h4>
<pre>protected&nbsp;<a href="../../../uws/service/request/UploadFile.html" title="class in uws.service.request">UploadFile</a>&nbsp;getUploadFile(<a href="../../../org/json/JSONObject.html" title="class in org.json">JSONObject</a>&nbsp;obj)</pre>
<div class="block">Build the upload file corresponding to the given JSON object.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>obj</code> - The JSON representation of the <a href="../../../uws/service/request/UploadFile.html" title="class in uws.service.request"><code>UploadFile</code></a> to get.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The corresponding <a href="../../../uws/service/request/UploadFile.html" title="class in uws.service.request"><code>UploadFile</code></a>.</dd><dt><span class="strong">Since:</span></dt>
  <dd>4.1</dd></dl>
</li>
</ul>
<a name="getResults(org.json.JSONArray)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getResults</h4>
<pre>protected&nbsp;java.util.ArrayList&lt;<a href="../../../uws/job/Result.html" title="class in uws.job">Result</a>&gt;&nbsp;getResults(<a href="../../../org/json/JSONArray.html" title="class in org.json">JSONArray</a>&nbsp;array)
                                          throws <a href="../../../uws/UWSException.html" title="class in uws">UWSException</a></pre>
<div class="block">Builds the list of results corresponding to the given JSON array.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>array</code> - The JSON representation of the results to restore.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The corresponding list of results
                                                        or <i>null</i> if the array is empty.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../uws/UWSException.html" title="class in uws">UWSException</a></code> - If there is an error while restoring one of the result.</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../../uws/service/backup/DefaultUWSBackupManager.html#getResult(org.json.JSONObject)"><code>getResult(JSONObject)</code></a></dd></dl>
</li>
</ul>
<a name="getResult(org.json.JSONObject)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getResult</h4>
<pre>protected&nbsp;<a href="../../../uws/job/Result.html" title="class in uws.job">Result</a>&nbsp;getResult(<a href="../../../org/json/JSONObject.html" title="class in org.json">JSONObject</a>&nbsp;obj)
                    throws <a href="../../../org/json/JSONException.html" title="class in org.json">JSONException</a>,
                           <a href="../../../uws/UWSException.html" title="class in uws">UWSException</a></pre>
<div class="block">Builds the result corresponding to the given JSON object.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>obj</code> - The JSON representation of the result to restore.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The corresponding result or <i>null</i> if the given object is empty.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../org/json/JSONException.html" title="class in org.json">JSONException</a></code> - If there is an error while reading the JSON.</dd>
<dd><code><a href="../../../uws/UWSException.html" title="class in uws">UWSException</a></code></dd></dl>
</li>
</ul>
<a name="getError(org.json.JSONObject)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getError</h4>
<pre>protected&nbsp;<a href="../../../uws/job/ErrorSummary.html" title="class in uws.job">ErrorSummary</a>&nbsp;getError(<a href="../../../org/json/JSONObject.html" title="class in org.json">JSONObject</a>&nbsp;obj)
                         throws <a href="../../../uws/UWSException.html" title="class in uws">UWSException</a></pre>
<div class="block">Builds the error summary corresponding to the given JSON object.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>obj</code> - The JSON representation of the error summary to restore.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The corresponding error summary or <i>null</i> if the given object is empty.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../uws/UWSException.html" title="class in uws">UWSException</a></code></dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/DefaultUWSBackupManager.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev Class</li>
<li><a href="../../../uws/service/backup/DefaultUWSBackupManager.JSONArrayReader.html" title="class in uws.service.backup"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?uws/service/backup/DefaultUWSBackupManager.html" target="_top">Frames</a></li>
<li><a href="DefaultUWSBackupManager.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
