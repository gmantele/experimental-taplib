<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_95) on Fri Jan 29 20:29:45 CET 2016 -->
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>DefaultTAPErrorWriter</title>
<meta name="date" content="2016-01-29">
<link rel="stylesheet" type="text/css" href="../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="DefaultTAPErrorWriter";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/DefaultTAPErrorWriter.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-files/index-1.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev Class</li>
<li>Next Class</li>
</ul>
<ul class="navList">
<li><a href="../../index.html?tap/error/DefaultTAPErrorWriter.html" target="_top">Frames</a></li>
<li><a href="DefaultTAPErrorWriter.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">tap.error</div>
<h2 title="Class DefaultTAPErrorWriter" class="title">Class DefaultTAPErrorWriter</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>tap.error.DefaultTAPErrorWriter</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../uws/service/error/ServiceErrorWriter.html" title="interface in uws.service.error">ServiceErrorWriter</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="strong">DefaultTAPErrorWriter</span>
extends java.lang.Object
implements <a href="../../uws/service/error/ServiceErrorWriter.html" title="interface in uws.service.error">ServiceErrorWriter</a></pre>
<div class="block"><p>Default implementation of <a href="../../uws/service/error/ServiceErrorWriter.html" title="interface in uws.service.error"><code>ServiceErrorWriter</code></a> for a TAP service.</p>
 
 <p>
        On the contrary to the UWS standard, all errors must be formatted in VOTable.
        So, all errors given to this <a href="../../uws/service/error/ServiceErrorWriter.html" title="interface in uws.service.error"><code>ServiceErrorWriter</code></a> are formatted in VOTable using the structure defined by the IVOA.
        To do that, this class will use the function <a href="../../tap/formatter/VOTableFormat.html#writeError(java.lang.String,%20java.util.Map,%20java.io.PrintWriter)"><code>VOTableFormat.writeError(String, java.util.Map, java.io.PrintWriter)</code></a>.
 </p>
 
 <p>
        The <a href="../../tap/formatter/VOTableFormat.html" title="class in tap.formatter"><code>VOTableFormat</code></a> will be got from the <a href="../../tap/ServiceConnection.html" title="interface in tap"><code>ServiceConnection</code></a> using <a href="../../tap/ServiceConnection.html#getOutputFormat(java.lang.String)"><code>ServiceConnection.getOutputFormat(String)</code></a>
        with "votable" as parameter. If the returned formatter is not a direct instance or an extension of <a href="../../tap/formatter/VOTableFormat.html" title="class in tap.formatter"><code>VOTableFormat</code></a>,
        a default instance of this class will be always used.
 </p>
 
 <p>
        <a href="../../uws/UWSException.html" title="class in uws"><code>UWSException</code></a>s and <a href="../../tap/TAPException.html" title="class in tap"><code>TAPException</code></a>s may precise the HTTP error code to apply,
        which will be used to set the HTTP status of the response. If it is a different kind of exception,
        the HTTP status 500 (INTERNAL SERVER ERROR) will be used.
 </p>
 
 <p>
        Besides, all exceptions except <a href="../../uws/UWSException.html" title="class in uws"><code>UWSException</code></a> and <a href="../../tap/TAPException.html" title="class in tap"><code>TAPException</code></a> will be logged as FATAL in the TAP context
        (with no event and no object). Thus the full stack trace is available to the administrator so that the error can
        be understood as easily and quickly as possible.
 </p></div>
<dl><dt><span class="strong">Version:</span></dt>
  <dd>2.0 (04/2015)</dd>
<dt><span class="strong">Author:</span></dt>
  <dd>Gr&eacute;gory Mantelet (CDS;ARI)</dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="../../tap/formatter/VOTableFormat.html" title="class in tap.formatter">VOTableFormat</a></code></td>
<td class="colLast"><code><strong><a href="../../tap/error/DefaultTAPErrorWriter.html#formatter">formatter</a></strong></code>
<div class="block">Object to use to format an error message into VOTable.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected <a href="../../tap/log/TAPLog.html" title="interface in tap.log">TAPLog</a></code></td>
<td class="colLast"><code><strong><a href="../../tap/error/DefaultTAPErrorWriter.html#logger">logger</a></strong></code>
<div class="block">Logger to use to report any unexpected error.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="../../tap/ServiceConnection.html" title="interface in tap">ServiceConnection</a></code></td>
<td class="colLast"><code><strong><a href="../../tap/error/DefaultTAPErrorWriter.html#service">service</a></strong></code>
<div class="block">Description of the TAP service using this <a href="../../uws/service/error/ServiceErrorWriter.html" title="interface in uws.service.error"><code>ServiceErrorWriter</code></a>.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../tap/error/DefaultTAPErrorWriter.html#DefaultTAPErrorWriter(tap.ServiceConnection)">DefaultTAPErrorWriter</a></strong>(<a href="../../tap/ServiceConnection.html" title="interface in tap">ServiceConnection</a>&nbsp;service)</code>
<div class="block">Build an error writer for TAP.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../tap/error/DefaultTAPErrorWriter.html#getErrorDetailsMIMEType()">getErrorDetailsMIMEType</a></strong>()</code>
<div class="block">Get the MIME type of the error details written by <a href="../../uws/service/error/ServiceErrorWriter.html#writeError(java.lang.Throwable,%20uws.job.ErrorSummary,%20uws.job.UWSJob,%20java.io.OutputStream)"><code>ServiceErrorWriter.writeError(Throwable, ErrorSummary, UWSJob, OutputStream)</code></a> in the error summary.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected <a href="../../tap/formatter/VOTableFormat.html" title="class in tap.formatter">VOTableFormat</a></code></td>
<td class="colLast"><code><strong><a href="../../tap/error/DefaultTAPErrorWriter.html#getFormatter()">getFormatter</a></strong>()</code>
<div class="block">Get the <a href="../../tap/formatter/VOTableFormat.html" title="class in tap.formatter"><code>VOTableFormat</code></a> to use in order to format errors.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="../../tap/log/TAPLog.html" title="interface in tap.log">TAPLog</a></code></td>
<td class="colLast"><code><strong><a href="../../tap/error/DefaultTAPErrorWriter.html#getLogger()">getLogger</a></strong>()</code>
<div class="block">Get the logger to use inside this <a href="../../uws/service/error/ServiceErrorWriter.html" title="interface in uws.service.error"><code>ServiceErrorWriter</code></a>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../tap/error/DefaultTAPErrorWriter.html#putExceptionInfos(java.lang.Throwable,%20java.util.Map)">putExceptionInfos</a></strong>(java.lang.Throwable&nbsp;t,
                 java.util.Map&lt;java.lang.String,java.lang.String&gt;&nbsp;addInfos)</code>
<div class="block">Add all interesting additional information about the given exception inside the given map.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../tap/error/DefaultTAPErrorWriter.html#writeError(java.lang.String,%20uws.job.ErrorType,%20int,%20javax.servlet.http.HttpServletResponse,%20javax.servlet.http.HttpServletRequest,%20java.lang.String,%20uws.job.user.JobOwner,%20java.lang.String)">writeError</a></strong>(java.lang.String&nbsp;message,
          <a href="../../uws/job/ErrorType.html" title="enum in uws.job">ErrorType</a>&nbsp;type,
          int&nbsp;httpErrorCode,
          javax.servlet.http.HttpServletResponse&nbsp;response,
          javax.servlet.http.HttpServletRequest&nbsp;request,
          java.lang.String&nbsp;reqID,
          <a href="../../uws/job/user/JobOwner.html" title="interface in uws.job.user">JobOwner</a>&nbsp;user,
          java.lang.String&nbsp;action)</code>
<div class="block">Write the described error in the given response.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../tap/error/DefaultTAPErrorWriter.html#writeError(java.lang.Throwable,%20uws.job.ErrorSummary,%20uws.job.UWSJob,%20java.io.OutputStream)">writeError</a></strong>(java.lang.Throwable&nbsp;t,
          <a href="../../uws/job/ErrorSummary.html" title="class in uws.job">ErrorSummary</a>&nbsp;error,
          <a href="../../uws/job/UWSJob.html" title="class in uws.job">UWSJob</a>&nbsp;job,
          java.io.OutputStream&nbsp;output)</code>
<div class="block">Write the given error in the given output stream.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../tap/error/DefaultTAPErrorWriter.html#writeError(java.lang.Throwable,%20javax.servlet.http.HttpServletResponse,%20javax.servlet.http.HttpServletRequest,%20java.lang.String,%20uws.job.user.JobOwner,%20java.lang.String)">writeError</a></strong>(java.lang.Throwable&nbsp;t,
          javax.servlet.http.HttpServletResponse&nbsp;response,
          javax.servlet.http.HttpServletRequest&nbsp;request,
          java.lang.String&nbsp;reqID,
          <a href="../../uws/job/user/JobOwner.html" title="interface in uws.job.user">JobOwner</a>&nbsp;user,
          java.lang.String&nbsp;action)</code>
<div class="block">Write the given exception in the given response.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="service">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>service</h4>
<pre>protected final&nbsp;<a href="../../tap/ServiceConnection.html" title="interface in tap">ServiceConnection</a> service</pre>
<div class="block">Description of the TAP service using this <a href="../../uws/service/error/ServiceErrorWriter.html" title="interface in uws.service.error"><code>ServiceErrorWriter</code></a>.</div>
</li>
</ul>
<a name="logger">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>logger</h4>
<pre>protected&nbsp;<a href="../../tap/log/TAPLog.html" title="interface in tap.log">TAPLog</a> logger</pre>
<div class="block">Logger to use to report any unexpected error.
 <b>This attribute MUST NEVER be used directly, but only with its getter <a href="../../tap/error/DefaultTAPErrorWriter.html#getLogger()"><code>getLogger()</code></a>.</b></div>
</li>
</ul>
<a name="formatter">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>formatter</h4>
<pre>protected&nbsp;<a href="../../tap/formatter/VOTableFormat.html" title="class in tap.formatter">VOTableFormat</a> formatter</pre>
<div class="block">Object to use to format an error message into VOTable.
 <b>This attribute MUST NEVER be used directly, but only with its getter <a href="../../tap/error/DefaultTAPErrorWriter.html#getFormatter()"><code>getFormatter()</code></a>.</b></div>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="DefaultTAPErrorWriter(tap.ServiceConnection)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>DefaultTAPErrorWriter</h4>
<pre>public&nbsp;DefaultTAPErrorWriter(<a href="../../tap/ServiceConnection.html" title="interface in tap">ServiceConnection</a>&nbsp;service)
                      throws java.lang.NullPointerException</pre>
<div class="block"><p>Build an error writer for TAP.</p>
 
 <p>
        On the contrary to the UWS standard, TAP standard defines a format for error reporting.
        Errors should be reported as VOTable document with a defined structure.  This one is well
        managed by <a href="../../tap/formatter/VOTableFormat.html" title="class in tap.formatter"><code>VOTableFormat</code></a> which is actually called by this class when an error must
        be written.
 </p></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>service</code> - Description of the TAP service.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.lang.NullPointerException</code> - If no service description is provided.</dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getFormatter()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getFormatter</h4>
<pre>protected&nbsp;<a href="../../tap/formatter/VOTableFormat.html" title="class in tap.formatter">VOTableFormat</a>&nbsp;getFormatter()</pre>
<div class="block"><p>Get the <a href="../../tap/formatter/VOTableFormat.html" title="class in tap.formatter"><code>VOTableFormat</code></a> to use in order to format errors.</p>
 
 <p><i>Note:
        If not yet set, the formatter of this <a href="../../uws/service/error/ServiceErrorWriter.html" title="interface in uws.service.error"><code>ServiceErrorWriter</code></a> is set to the formatter of VOTable results returned by the <a href="../../tap/ServiceConnection.html" title="interface in tap"><code>ServiceConnection</code></a>.
        However this formatter should be a <a href="../../tap/formatter/VOTableFormat.html" title="class in tap.formatter"><code>VOTableFormat</code></a> instance or an extension (because the function <a href="../../tap/formatter/VOTableFormat.html#writeError(java.lang.String,%20java.util.Map,%20java.io.PrintWriter)"><code>VOTableFormat.writeError(String, java.util.Map, PrintWriter)</code></a> is needed).
        Otherwise a default <a href="../../tap/formatter/VOTableFormat.html" title="class in tap.formatter"><code>VOTableFormat</code></a> instance will be created and always used by this <a href="../../uws/service/error/ServiceErrorWriter.html" title="interface in uws.service.error"><code>ServiceErrorWriter</code></a>.
 </i></p></div>
<dl><dt><span class="strong">Returns:</span></dt><dd>A VOTable formatter.</dd><dt><span class="strong">Since:</span></dt>
  <dd>2.0</dd></dl>
</li>
</ul>
<a name="getLogger()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLogger</h4>
<pre>protected&nbsp;<a href="../../tap/log/TAPLog.html" title="interface in tap.log">TAPLog</a>&nbsp;getLogger()</pre>
<div class="block"><p>Get the logger to use inside this <a href="../../uws/service/error/ServiceErrorWriter.html" title="interface in uws.service.error"><code>ServiceErrorWriter</code></a>.</p>
 
 <p><i>Note:
        If not yet set, the logger of this <a href="../../uws/service/error/ServiceErrorWriter.html" title="interface in uws.service.error"><code>ServiceErrorWriter</code></a> is set to the logger used by the <a href="../../tap/ServiceConnection.html" title="interface in tap"><code>ServiceConnection</code></a>.
        If none is returned by the <a href="../../tap/ServiceConnection.html" title="interface in tap"><code>ServiceConnection</code></a>, a default <a href="../../tap/log/TAPLog.html" title="interface in tap.log"><code>TAPLog</code></a> instance writing logs in System.err
        will be created and always used by this <a href="../../uws/service/error/ServiceErrorWriter.html" title="interface in uws.service.error"><code>ServiceErrorWriter</code></a>.
 </i></p></div>
<dl><dt><span class="strong">Returns:</span></dt><dd>A logger.</dd><dt><span class="strong">Since:</span></dt>
  <dd>2.0</dd></dl>
</li>
</ul>
<a name="writeError(java.lang.Throwable, javax.servlet.http.HttpServletResponse, javax.servlet.http.HttpServletRequest, java.lang.String, uws.job.user.JobOwner, java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>writeError</h4>
<pre>public&nbsp;boolean&nbsp;writeError(java.lang.Throwable&nbsp;t,
                 javax.servlet.http.HttpServletResponse&nbsp;response,
                 javax.servlet.http.HttpServletRequest&nbsp;request,
                 java.lang.String&nbsp;reqID,
                 <a href="../../uws/job/user/JobOwner.html" title="interface in uws.job.user">JobOwner</a>&nbsp;user,
                 java.lang.String&nbsp;action)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../uws/service/error/ServiceErrorWriter.html#writeError(java.lang.Throwable,%20javax.servlet.http.HttpServletResponse,%20javax.servlet.http.HttpServletRequest,%20java.lang.String,%20uws.job.user.JobOwner,%20java.lang.String)">ServiceErrorWriter</a></code></strong></div>
<div class="block"><p>Write the given exception in the given response.</p>
 
 <p><i>Note:
        If this function is called without at least an exception and an HTTP response, nothing should be done.
        No error may be thrown.
 </i></p>
 
 <p><i><b>IMPORTANT:</b>
        If any <code>IOException</code> occurs while writing the error in the given <code>HttpServletResponse</code> output stream,
        this function should stop and return <code>false</code>. In such case, the error which was supposed to be written
        may be logged.
 </i></p></div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../uws/service/error/ServiceErrorWriter.html#writeError(java.lang.Throwable,%20javax.servlet.http.HttpServletResponse,%20javax.servlet.http.HttpServletRequest,%20java.lang.String,%20uws.job.user.JobOwner,%20java.lang.String)">writeError</a></code>&nbsp;in interface&nbsp;<code><a href="../../uws/service/error/ServiceErrorWriter.html" title="interface in uws.service.error">ServiceErrorWriter</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>t</code> - Exception to write/format.</dd><dd><code>response</code> - Response in which the given exception must be written.</dd><dd><code>request</code> - Request at the origin of the error (MAY BE NULL).</dd><dd><code>reqID</code> - ID of the request (which let the user and the administrator identify the failed request). (MAY BE NULL if the request is not provided)</dd><dd><code>user</code> - User which sends the given request (which generates the error) (MAY BE NULL).</dd><dd><code>action</code> - Type/Name of the action which generates the error (MAY BE NULL).</dd>
<dt><span class="strong">Returns:</span></dt><dd><i>true</i> if the given error message has been successfully written in the given <code>HttpServletResponse</code>,
                <i>false</i> otherwise.</dd></dl>
</li>
</ul>
<a name="writeError(java.lang.String, uws.job.ErrorType, int, javax.servlet.http.HttpServletResponse, javax.servlet.http.HttpServletRequest, java.lang.String, uws.job.user.JobOwner, java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>writeError</h4>
<pre>public&nbsp;boolean&nbsp;writeError(java.lang.String&nbsp;message,
                 <a href="../../uws/job/ErrorType.html" title="enum in uws.job">ErrorType</a>&nbsp;type,
                 int&nbsp;httpErrorCode,
                 javax.servlet.http.HttpServletResponse&nbsp;response,
                 javax.servlet.http.HttpServletRequest&nbsp;request,
                 java.lang.String&nbsp;reqID,
                 <a href="../../uws/job/user/JobOwner.html" title="interface in uws.job.user">JobOwner</a>&nbsp;user,
                 java.lang.String&nbsp;action)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../uws/service/error/ServiceErrorWriter.html#writeError(java.lang.String,%20uws.job.ErrorType,%20int,%20javax.servlet.http.HttpServletResponse,%20javax.servlet.http.HttpServletRequest,%20java.lang.String,%20uws.job.user.JobOwner,%20java.lang.String)">ServiceErrorWriter</a></code></strong></div>
<div class="block"><p>Write the described error in the given response.</p>
 
 <p><i>Note:
        If this function is called without at least a message and an HTTP response, nothing should be done.
        No error may be thrown.
 </i></p>
 
 <p><i><b>IMPORTANT:</b>
        If any <code>IOException</code> occurs while writing the error in the given <code>HttpServletResponse</code> output stream,
        this function should stop and return <code>false</code>. In such case, the error which was supposed to be written
        may be logged.
 </i></p></div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../uws/service/error/ServiceErrorWriter.html#writeError(java.lang.String,%20uws.job.ErrorType,%20int,%20javax.servlet.http.HttpServletResponse,%20javax.servlet.http.HttpServletRequest,%20java.lang.String,%20uws.job.user.JobOwner,%20java.lang.String)">writeError</a></code>&nbsp;in interface&nbsp;<code><a href="../../uws/service/error/ServiceErrorWriter.html" title="interface in uws.service.error">ServiceErrorWriter</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>message</code> - Message to display.</dd><dd><code>type</code> - Type of the error: FATAL or TRANSIENT.</dd><dd><code>httpErrorCode</code> - HTTP error code (i.e. 404, 500).</dd><dd><code>response</code> - Response in which the described error must be written.</dd><dd><code>request</code> - Request which causes this error.</dd><dd><code>reqID</code> - ID of the request (which let the user and the administrator identify the failed request).</dd><dd><code>user</code> - User which sends the HTTP request.</dd><dd><code>action</code> - Action corresponding to the given request.</dd>
<dt><span class="strong">Returns:</span></dt><dd><i>true</i> if the given error message has been successfully written in the given <code>HttpServletResponse</code>,
                <i>false</i> otherwise.</dd></dl>
</li>
</ul>
<a name="writeError(java.lang.Throwable, uws.job.ErrorSummary, uws.job.UWSJob, java.io.OutputStream)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>writeError</h4>
<pre>public&nbsp;void&nbsp;writeError(java.lang.Throwable&nbsp;t,
              <a href="../../uws/job/ErrorSummary.html" title="class in uws.job">ErrorSummary</a>&nbsp;error,
              <a href="../../uws/job/UWSJob.html" title="class in uws.job">UWSJob</a>&nbsp;job,
              java.io.OutputStream&nbsp;output)
                throws java.io.IOException</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../uws/service/error/ServiceErrorWriter.html#writeError(java.lang.Throwable,%20uws.job.ErrorSummary,%20uws.job.UWSJob,%20java.io.OutputStream)">ServiceErrorWriter</a></code></strong></div>
<div class="block"><p>Write the given error in the given output stream.</p>
 
 <p>
        This function is used only for the error summary of a job (that's to say to report in the
        ../error/details parameter any error which occurs while executing a job).
 </p>
 
 <p><i><b>Important note:</b>
        The error details written in the given output MUST always have the same MIME type.
        This latter MUST be returned by <a href="../../uws/service/error/ServiceErrorWriter.html#getErrorDetailsMIMEType()"><code>ServiceErrorWriter.getErrorDetailsMIMEType()</code></a>.
 </i></p></div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../uws/service/error/ServiceErrorWriter.html#writeError(java.lang.Throwable,%20uws.job.ErrorSummary,%20uws.job.UWSJob,%20java.io.OutputStream)">writeError</a></code>&nbsp;in interface&nbsp;<code><a href="../../uws/service/error/ServiceErrorWriter.html" title="interface in uws.service.error">ServiceErrorWriter</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>t</code> - Error to write. If <i>error</i> is not null, it will be displayed instead of the message of this throwable.</dd><dd><code>error</code> - Summary of the error. It may particularly contain a message different from the one of the given exception. In this case, it will displayed instead of the exception's message.</dd><dd><code>job</code> - The job which fails.</dd><dd><code>output</code> - Stream in which the error must be written.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code> - If there an error while writing the error in the given stream.</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../uws/service/error/ServiceErrorWriter.html#getErrorDetailsMIMEType()"><code>ServiceErrorWriter.getErrorDetailsMIMEType()</code></a></dd></dl>
</li>
</ul>
<a name="putExceptionInfos(java.lang.Throwable, java.util.Map)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>putExceptionInfos</h4>
<pre>protected&nbsp;void&nbsp;putExceptionInfos(java.lang.Throwable&nbsp;t,
                     java.util.Map&lt;java.lang.String,java.lang.String&gt;&nbsp;addInfos)</pre>
<div class="block">Add all interesting additional information about the given exception inside the given map.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>t</code> - Exception whose some details must be added inside the given map.</dd><dd><code>addInfos</code> - Map of all additional information.</dd><dt><span class="strong">Since:</span></dt>
  <dd>2.0</dd></dl>
</li>
</ul>
<a name="getErrorDetailsMIMEType()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getErrorDetailsMIMEType</h4>
<pre>public&nbsp;java.lang.String&nbsp;getErrorDetailsMIMEType()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../uws/service/error/ServiceErrorWriter.html#getErrorDetailsMIMEType()">ServiceErrorWriter</a></code></strong></div>
<div class="block"><p>Get the MIME type of the error details written by <a href="../../uws/service/error/ServiceErrorWriter.html#writeError(java.lang.Throwable,%20uws.job.ErrorSummary,%20uws.job.UWSJob,%20java.io.OutputStream)"><code>ServiceErrorWriter.writeError(Throwable, ErrorSummary, UWSJob, OutputStream)</code></a> in the error summary.</p>
 
 <p><i><b>Important note:</b>
        If NULL is returned, the MIME type will be considered as <i>text/plain</i>.
 </i></p></div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../uws/service/error/ServiceErrorWriter.html#getErrorDetailsMIMEType()">getErrorDetailsMIMEType</a></code>&nbsp;in interface&nbsp;<code><a href="../../uws/service/error/ServiceErrorWriter.html" title="interface in uws.service.error">ServiceErrorWriter</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>MIME type of the error details document. If NULL, it will be considered as text/plain.</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../uws/service/error/ServiceErrorWriter.html#writeError(java.lang.Throwable,%20uws.job.ErrorSummary,%20uws.job.UWSJob,%20java.io.OutputStream)"><code>ServiceErrorWriter.writeError(Throwable, ErrorSummary, UWSJob, OutputStream)</code></a></dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/DefaultTAPErrorWriter.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-files/index-1.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev Class</li>
<li>Next Class</li>
</ul>
<ul class="navList">
<li><a href="../../index.html?tap/error/DefaultTAPErrorWriter.html" target="_top">Frames</a></li>
<li><a href="DefaultTAPErrorWriter.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
