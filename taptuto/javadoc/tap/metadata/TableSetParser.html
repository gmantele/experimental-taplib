<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_95) on Fri Jan 29 20:29:45 CET 2016 -->
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>TableSetParser</title>
<meta name="date" content="2016-01-29">
<link rel="stylesheet" type="text/css" href="../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="TableSetParser";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/TableSetParser.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-files/index-1.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev Class</li>
<li><a href="../../tap/metadata/TableSetParser.ForeignKey.html" title="class in tap.metadata"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../index.html?tap/metadata/TableSetParser.html" target="_top">Frames</a></li>
<li><a href="TableSetParser.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">tap.metadata</div>
<h2 title="Class TableSetParser" class="title">Class TableSetParser</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>org.xml.sax.helpers.DefaultHandler</li>
<li>
<ul class="inheritance">
<li>tap.metadata.TableSetParser</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd>org.xml.sax.ContentHandler, org.xml.sax.DTDHandler, org.xml.sax.EntityResolver, org.xml.sax.ErrorHandler</dd>
</dl>
<hr>
<br>
<pre>public class <span class="strong">TableSetParser</span>
extends org.xml.sax.helpers.DefaultHandler</pre>
<div class="block"><p>Let parse an XML document representing a table set, and return the corresponding <a href="../../tap/metadata/TAPMetadata.html" title="class in tap.metadata"><code>TAPMetadata</code></a> instance.</p>
 
 <p><i>Note 1: the table set must follow the syntax specified by the XML Schema http://www.ivoa.net/xml/VODataService.</i></p>
 <p><i>Note 2: only tags specified by VODataService are checked. If there is any other tag, they are merely ignored.</i></p>
 
 <h3>Exceptions</h3>
 
 <p>A <a href="../../tap/TAPException.html" title="class in tap"><code>TAPException</code></a> is thrown in the following cases:</p>
 <ul>
        <li>the root node is not "tableset"</li>
        <li>table name syntax ([schema.]table) is incorrect</li>
        <li>a single table name (just "table" without schema prefix) is ambiguous (that's to say, the same name is used for tables of different schemas)</li>
        <li>"name" node is missing in nodes "schema", "table" and "column"</li>
        <li>"targetTable" is missing in node "foreignKey"</li>
        <li>"fromColumn" or "targetColumn" is missing in node "fkColumn"</li>
        <li>"name" node is duplicated in the same node</li>
        <li>missing "xsi:type" as attribute in a "dataType" node</li>
        <li>unknown column datatype</li>
 </ul>
 
 <p><i>Note: catalog prefixes are not supported in this parser.</i></p>
 
 <h3>Datatype</h3>
 
 <p>
        A column datatype may be specified either as a TAP or a VOTable datatype. Thus, the type of specification must be given with the attribute xsi:type of the
        node "dataType". For instance:
 </p>
 <ul>
        <li><code>&lt;dataType xsi:type="vs:VOTableType" arraysize="1"&gt;float&lt;/dataType&gt;</code> for a VOTable datatype</li>
        <li><code>&lt;dataType xsi:type="vod:TAPType"&gt;VARCHAR&lt;/dataType&gt;</code> for a TAP datatype</li>
 </ul></div>
<dl><dt><span class="strong">Since:</span></dt>
  <dd>2.0</dd>
<dt><span class="strong">Version:</span></dt>
  <dd>2.0 (02/2015)</dd>
<dt><span class="strong">Author:</span></dt>
  <dd>Gr&eacute;gory Mantelet (ARI)</dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested_class_summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected static class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../tap/metadata/TableSetParser.ForeignKey.html" title="class in tap.metadata">TableSetParser.ForeignKey</a></strong></code>
<div class="block">Intermediary representation of a Foreign Key.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected static java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../tap/metadata/TableSetParser.html#VODATASERVICE_NAMESPACE">VODATASERVICE_NAMESPACE</a></strong></code>
<div class="block">XML namespace for the XML schema VODataService.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected static java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../tap/metadata/TableSetParser.html#XSI_NAMESPACE">XSI_NAMESPACE</a></strong></code>
<div class="block">XML namespace for the XML schema XMLSchema-instance.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../tap/metadata/TableSetParser.html#TableSetParser()">TableSetParser</a></strong>()</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../tap/metadata/TableSetParser.html#getPosition(javax.xml.stream.XMLStreamReader)">getPosition</a></strong>(javax.xml.stream.XMLStreamReader&nbsp;reader)</code>
<div class="block">Get the current position of the given reader.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../tap/metadata/TableSetParser.html#getText(javax.xml.stream.XMLStreamReader)">getText</a></strong>(javax.xml.stream.XMLStreamReader&nbsp;reader)</code>
<div class="block">Get the text of the current node.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../tap/metadata/TableSetParser.html#goToEndTag(javax.xml.stream.XMLStreamReader,%20java.lang.String)">goToEndTag</a></strong>(javax.xml.stream.XMLStreamReader&nbsp;reader,
          java.lang.String&nbsp;startNode)</code>
<div class="block">Skip all tags from the current position to the end of the specified node.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected int</code></td>
<td class="colLast"><code><strong><a href="../../tap/metadata/TableSetParser.html#nextTag(javax.xml.stream.XMLStreamReader)">nextTag</a></strong>(javax.xml.stream.XMLStreamReader&nbsp;reader)</code>
<div class="block">Skip every elements until a START ELEMENT or an END ELEMENT is reached.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../tap/metadata/TAPMetadata.html" title="class in tap.metadata">TAPMetadata</a></code></td>
<td class="colLast"><code><strong><a href="../../tap/metadata/TableSetParser.html#parse(java.io.File)">parse</a></strong>(java.io.File&nbsp;file)</code>
<div class="block">Parse the XML TableSet stored in the specified file.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../tap/metadata/TAPMetadata.html" title="class in tap.metadata">TAPMetadata</a></code></td>
<td class="colLast"><code><strong><a href="../../tap/metadata/TableSetParser.html#parse(java.io.InputStream)">parse</a></strong>(java.io.InputStream&nbsp;input)</code>
<div class="block">Parse the XML TableSet stored in the given stream.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="../../tap/metadata/TAPColumn.html" title="class in tap.metadata">TAPColumn</a></code></td>
<td class="colLast"><code><strong><a href="../../tap/metadata/TableSetParser.html#parseColumn(javax.xml.stream.XMLStreamReader)">parseColumn</a></strong>(javax.xml.stream.XMLStreamReader&nbsp;reader)</code>
<div class="block">Parse the XML representation of a TAP column.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected <a href="../../adql/db/DBType.html" title="class in adql.db">DBType</a></code></td>
<td class="colLast"><code><strong><a href="../../tap/metadata/TableSetParser.html#parseDataType(javax.xml.stream.XMLStreamReader)">parseDataType</a></strong>(javax.xml.stream.XMLStreamReader&nbsp;reader)</code>
<div class="block">Parse the XML representation of a column datatype.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="../../tap/metadata/TableSetParser.ForeignKey.html" title="class in tap.metadata">TableSetParser.ForeignKey</a></code></td>
<td class="colLast"><code><strong><a href="../../tap/metadata/TableSetParser.html#parseFKey(javax.xml.stream.XMLStreamReader)">parseFKey</a></strong>(javax.xml.stream.XMLStreamReader&nbsp;reader)</code>
<div class="block">Parse the XML representation of a TAP foreign key.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected <a href="../../tap/metadata/TAPSchema.html" title="class in tap.metadata">TAPSchema</a></code></td>
<td class="colLast"><code><strong><a href="../../tap/metadata/TableSetParser.html#parseSchema(javax.xml.stream.XMLStreamReader,%20java.util.List)">parseSchema</a></strong>(javax.xml.stream.XMLStreamReader&nbsp;reader,
           java.util.List&lt;<a href="../../tap/metadata/TableSetParser.ForeignKey.html" title="class in tap.metadata">TableSetParser.ForeignKey</a>&gt;&nbsp;allForeignKeys)</code>
<div class="block">Parse the XML representation of a TAP schema.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="../../tap/metadata/TAPTable.html" title="class in tap.metadata">TAPTable</a></code></td>
<td class="colLast"><code><strong><a href="../../tap/metadata/TableSetParser.html#parseTable(javax.xml.stream.XMLStreamReader,%20java.util.List)">parseTable</a></strong>(javax.xml.stream.XMLStreamReader&nbsp;reader,
          java.util.List&lt;<a href="../../tap/metadata/TableSetParser.ForeignKey.html" title="class in tap.metadata">TableSetParser.ForeignKey</a>&gt;&nbsp;keys)</code>
<div class="block">Parse the XML representation of a TAP table.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected <a href="../../tap/metadata/TAPTable.html" title="class in tap.metadata">TAPTable</a></code></td>
<td class="colLast"><code><strong><a href="../../tap/metadata/TableSetParser.html#searchTable(java.lang.String,%20tap.metadata.TAPMetadata,%20java.lang.String)">searchTable</a></strong>(java.lang.String&nbsp;tableName,
           <a href="../../tap/metadata/TAPMetadata.html" title="class in tap.metadata">TAPMetadata</a>&nbsp;meta,
           java.lang.String&nbsp;position)</code>
<div class="block">Search for the specified table in the given TAP metadata.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_org.xml.sax.helpers.DefaultHandler">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;org.xml.sax.helpers.DefaultHandler</h3>
<code>characters, endDocument, endElement, endPrefixMapping, error, fatalError, ignorableWhitespace, notationDecl, processingInstruction, resolveEntity, setDocumentLocator, skippedEntity, startDocument, startElement, startPrefixMapping, unparsedEntityDecl, warning</code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="XSI_NAMESPACE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>XSI_NAMESPACE</h4>
<pre>protected static final&nbsp;java.lang.String XSI_NAMESPACE</pre>
<div class="block">XML namespace for the XML schema XMLSchema-instance.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../constant-values.html#tap.metadata.TableSetParser.XSI_NAMESPACE">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="VODATASERVICE_NAMESPACE">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>VODATASERVICE_NAMESPACE</h4>
<pre>protected static final&nbsp;java.lang.String VODATASERVICE_NAMESPACE</pre>
<div class="block">XML namespace for the XML schema VODataService.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../constant-values.html#tap.metadata.TableSetParser.VODATASERVICE_NAMESPACE">Constant Field Values</a></dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="TableSetParser()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>TableSetParser</h4>
<pre>public&nbsp;TableSetParser()</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="parse(java.io.File)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>parse</h4>
<pre>public&nbsp;<a href="../../tap/metadata/TAPMetadata.html" title="class in tap.metadata">TAPMetadata</a>&nbsp;parse(java.io.File&nbsp;file)
                  throws java.io.IOException,
                         <a href="../../tap/TAPException.html" title="class in tap">TAPException</a></pre>
<div class="block">Parse the XML TableSet stored in the specified file.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>file</code> - The regular file containing the TableSet to parse.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The corresponding TAP metadata.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code> - If any error occurs while reading the given file.</dd>
<dd><code><a href="../../tap/TAPException.html" title="class in tap">TAPException</a></code> - If any error occurs in the XML parsing or in the TAP metadata creation.</dd><dt><span class="strong">Since:</span></dt>
  <dd><a href="../../tap/metadata/TableSetParser.html#parse(java.io.InputStream)"><code>parse(InputStream)</code></a></dd></dl>
</li>
</ul>
<a name="parse(java.io.InputStream)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>parse</h4>
<pre>public&nbsp;<a href="../../tap/metadata/TAPMetadata.html" title="class in tap.metadata">TAPMetadata</a>&nbsp;parse(java.io.InputStream&nbsp;input)
                  throws java.io.IOException,
                         <a href="../../tap/TAPException.html" title="class in tap">TAPException</a></pre>
<div class="block">Parse the XML TableSet stored in the given stream.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>input</code> - The stream containing the TableSet to parse.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The corresponding TAP metadata.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code> - If any error occurs while reading the given stream.</dd>
<dd><code><a href="../../tap/TAPException.html" title="class in tap">TAPException</a></code> - If any error occurs in the XML parsing or in the TAP metadata creation.</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../tap/metadata/TableSetParser.html#parseSchema(javax.xml.stream.XMLStreamReader,%20java.util.List)"><code>parseSchema(XMLStreamReader, List)</code></a></dd></dl>
</li>
</ul>
<a name="parseSchema(javax.xml.stream.XMLStreamReader, java.util.List)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>parseSchema</h4>
<pre>protected&nbsp;<a href="../../tap/metadata/TAPSchema.html" title="class in tap.metadata">TAPSchema</a>&nbsp;parseSchema(javax.xml.stream.XMLStreamReader&nbsp;reader,
                    java.util.List&lt;<a href="../../tap/metadata/TableSetParser.ForeignKey.html" title="class in tap.metadata">TableSetParser.ForeignKey</a>&gt;&nbsp;allForeignKeys)
                         throws javax.xml.stream.XMLStreamException,
                                <a href="../../tap/TAPException.html" title="class in tap">TAPException</a></pre>
<div class="block"><p>Parse the XML representation of a TAP schema.</p>
 
 <p><b>Important: This function MUST be called just after the start element "schema" has been read!</b></p>
 
 <h3>Attributes</h3>
 
 <p>No attribute is expected in the start element "schema".</p>
 
 <h3>Children</h3>
 
 Only the following nodes are taken into account ; the others are ignored:
 <ul>
        <li>name <i>REQUIRED</i></li>
        <li>description <i>{0..1}</i></li>
        <li>title <i>{0..1}</i></li>
        <li>utype <i>{0..1}</i></li>
        <li>table <i>{*}</i></li>
 </ul></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>reader</code> - XML reader.</dd><dd><code>allForeignKeys</code> - List to fill with all encountered foreign keys.
                                        <i>note: these keys are not the final TAP meta, but a collection of all information found in the XML document.
                                        The final TAP meta will be created later, once all available tables and columns are available.</i></dd>
<dt><span class="strong">Returns:</span></dt><dd>The corresponding TAP schema.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.lang.IllegalStateException</code> - If this function is called while the reader has not just read the START ELEMENT tag of "table".</dd>
<dd><code>javax.xml.stream.XMLStreamException</code> - If there is an error processing the underlying XML source.</dd>
<dd><code><a href="../../tap/TAPException.html" title="class in tap">TAPException</a></code> - If several "name" nodes are found, or if none such node is found ; exactly one "name" node must be found.</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../tap/metadata/TableSetParser.html#parseTable(javax.xml.stream.XMLStreamReader,%20java.util.List)"><code>parseTable(XMLStreamReader, List)</code></a></dd></dl>
</li>
</ul>
<a name="parseTable(javax.xml.stream.XMLStreamReader, java.util.List)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>parseTable</h4>
<pre>protected&nbsp;<a href="../../tap/metadata/TAPTable.html" title="class in tap.metadata">TAPTable</a>&nbsp;parseTable(javax.xml.stream.XMLStreamReader&nbsp;reader,
                  java.util.List&lt;<a href="../../tap/metadata/TableSetParser.ForeignKey.html" title="class in tap.metadata">TableSetParser.ForeignKey</a>&gt;&nbsp;keys)
                       throws javax.xml.stream.XMLStreamException,
                              <a href="../../tap/TAPException.html" title="class in tap">TAPException</a></pre>
<div class="block"><p>Parse the XML representation of a TAP table.</p>
 
 <p><b>Important: This function MUST be called just after the start element "table" has been read!</b></p>
 
 <h3>Attributes</h3>
 
 The attribute "type" may be provided in the start element "table". One of the following value is expected:
 <ul>
        <li>base_table <i>or table</i></li>
        <li>output</li>
        <li>view</li>
 </ul>
 
 <h3>Children</h3>
 
 Only the following nodes are taken into account ; the others are ignored:
 <ul>
        <li>name <i>REQUIRED</i></li>
        <li>description <i>{0..1}</i></li>
        <li>title <i>{0..1}</i></li>
        <li>utype <i>{0..1}</i></li>
        <li>column <i>{*}</i></li>
        <li>foreignKey <i>{*}</i></li>
 </ul></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>reader</code> - XML reader.</dd><dd><code>keys</code> - List to fill with all encountered foreign keys.
                        <i>note: these keys are not the final TAP meta, but a collection of all information found in the XML document.
                        The final TAP meta will be created later, once all available tables and columns are available.</i></dd>
<dt><span class="strong">Returns:</span></dt><dd>The corresponding TAP table.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>javax.xml.stream.XMLStreamException</code> - If there is an error processing the underlying XML source.</dd>
<dd><code><a href="../../tap/TAPException.html" title="class in tap">TAPException</a></code> - If several "name" nodes are found, or if none such node is found ; exactly one "name" node must be found.</dd>
<dd><code>java.lang.IllegalStateException</code> - If this function is called while the reader has not just read the START ELEMENT tag of "table".</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../tap/metadata/TableSetParser.html#parseColumn(javax.xml.stream.XMLStreamReader)"><code>parseColumn(XMLStreamReader)</code></a>, 
<a href="../../tap/metadata/TableSetParser.html#parseFKey(javax.xml.stream.XMLStreamReader)"><code>parseFKey(XMLStreamReader)</code></a></dd></dl>
</li>
</ul>
<a name="parseColumn(javax.xml.stream.XMLStreamReader)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>parseColumn</h4>
<pre>protected&nbsp;<a href="../../tap/metadata/TAPColumn.html" title="class in tap.metadata">TAPColumn</a>&nbsp;parseColumn(javax.xml.stream.XMLStreamReader&nbsp;reader)
                         throws javax.xml.stream.XMLStreamException,
                                <a href="../../tap/TAPException.html" title="class in tap">TAPException</a></pre>
<div class="block"><p>Parse the XML representation of a TAP column.</p>
 
 <p><b>Important: This function MUST be called just after the start element "column" has been read!</b></p>
 
 <h3>Attributes</h3>
 
 The attribute "std" may be provided in the start element "column". One of the following value is expected:
 <ul>
        <li>false <i>(default value if the attribute is omitted)</i></li>
        <li>true</li>
 </ul>
 
 <h3>Children</h3>
 
 Only the following nodes are taken into account ; the others are ignored:
 <ul>
        <li>name <i>REQUIRED</i></li>
        <li>description <i>{0..1}</i></li>
        <li>ucd <i>{0..1}</i></li>
        <li>unit <i>{0..1}</i></li>
        <li>utype <i>{0..1}</i></li>
        <li>dataType <i>{0..1}</i></li>
        <li>flag <i>{*}, but only the values 'nullable', 'indexed' and 'primary' are currently supported by the library)</i></li>
 </ul></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>reader</code> - XML reader.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The corresponding TAP column.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>javax.xml.stream.XMLStreamException</code> - If there is an error processing the underlying XML source.</dd>
<dd><code><a href="../../tap/TAPException.html" title="class in tap">TAPException</a></code> - If several "name" nodes are found, or if none such node is found ; exactly one "name" node must be found.</dd>
<dd><code>java.lang.IllegalStateException</code> - If this function is called while the reader has not just read the START ELEMENT tag of "column".</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../tap/metadata/TableSetParser.html#parseDataType(javax.xml.stream.XMLStreamReader)"><code>parseDataType(XMLStreamReader)</code></a></dd></dl>
</li>
</ul>
<a name="parseDataType(javax.xml.stream.XMLStreamReader)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>parseDataType</h4>
<pre>protected&nbsp;<a href="../../adql/db/DBType.html" title="class in adql.db">DBType</a>&nbsp;parseDataType(javax.xml.stream.XMLStreamReader&nbsp;reader)
                        throws javax.xml.stream.XMLStreamException,
                               <a href="../../tap/TAPException.html" title="class in tap">TAPException</a></pre>
<div class="block"><p>Parse the XML representation of a column datatype.</p>
 
 <p><b>Important: This function MUST be called just after the start element "dataType" has been read!</b></p>
 
 <h3>Attributes</h3>
 
 The attribute "xsi:type" (where xsi = http://www.w3.org/2001/XMLSchema-instance) MUST be provided. Only the following values are supported and accepted
 <i>(below, vs = http://www.ivoa.net/xml/VODataService)</i>:
 <ul>
        <li><b>vs:VOTableType</b>, and the following attributes may be also provided:
                <ul>
                        <li>arraysize</li>
                        <li>xtype</li>
                </ul></li>
        <li><b>vs:TAPType</b>, and the attribute "size" may be also provided</li>
 </ul>
 
 <h3>Children</h3>
 
 No child, but a text MUST be provided. Its value depends of the attribute "xsi:type": a VOTable datatype (e.g. char, float, short) if "xsi:type=vs:VOTableType",
 or a TAP type (e.g. VARCHAR, REAL, SMALLINT) if "xsi:type=vs:TAPType". <i>Any other value will be rejected.</i>
 
 <p><i>IMPORTANT: All VOTable datatypes will be converted into TAPType automatically by the library.</i></p></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>reader</code> - XML reader.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The corresponding column datatype.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>javax.xml.stream.XMLStreamException</code> - If there is an error processing the underlying XML source.</dd>
<dd><code><a href="../../tap/TAPException.html" title="class in tap">TAPException</a></code> - If the attribute "xsi:type" is missing or incorrect,
                                                or if the datatype is unknown or not supported.</dd>
<dd><code>java.lang.IllegalStateException</code> - If this function is called while the reader has not just read the START ELEMENT tag of "dataType".</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../tap/data/VOTableIterator.html#resolveVotType(java.lang.String,%20java.lang.String,%20java.lang.String)"><code>VOTableIterator.resolveVotType(String, String, String)</code></a>, 
<a href="../../adql/db/DBType.html#DBType(adql.db.DBType.DBDatatype,%20int)"><code>DBType.DBType(DBDatatype, int)</code></a></dd></dl>
</li>
</ul>
<a name="parseFKey(javax.xml.stream.XMLStreamReader)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>parseFKey</h4>
<pre>protected&nbsp;<a href="../../tap/metadata/TableSetParser.ForeignKey.html" title="class in tap.metadata">TableSetParser.ForeignKey</a>&nbsp;parseFKey(javax.xml.stream.XMLStreamReader&nbsp;reader)
                                       throws javax.xml.stream.XMLStreamException,
                                              <a href="../../tap/TAPException.html" title="class in tap">TAPException</a></pre>
<div class="block"><p>Parse the XML representation of a TAP foreign key.</p>
 
 <p><b>Important: This function MUST be called just after the start element "foreignKey" has been read!</b></p>
 
 <h3>Attributes</h3>
 
 <p>No attribute is expected in the start element "foreignKey".</p>
 
 <h3>Children</h3>
 
 Only the following nodes are taken into account ; the others are ignored:
 <ul>
        <li>targetTable <i>REQUIRED</i></li>
        <li>description <i>{0..1}</i></li>
        <li>utype <i>{0..1}</i></li>
        <li>fkColumn <i>{1..*}</i>
                <ul>
                        <li>fromColumn <i>REQUIRED</i></li>
                        <li>targetColumn <i>REQUIRED</i></li>
                </ul></li>
 </ul></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>reader</code> - XML reader.</dd>
<dt><span class="strong">Returns:</span></dt><dd>An object containing all information found in the XML node about the foreign key.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>javax.xml.stream.XMLStreamException</code> - If there is an error processing the underlying XML source.</dd>
<dd><code><a href="../../tap/TAPException.html" title="class in tap">TAPException</a></code> - If "targetTable" node is missing,
                                                or if no "fkColumn" is provided.</dd>
<dd><code>java.lang.IllegalStateException</code> - If this function is called while the reader has not just read the START ELEMENT tag of "foreignKey".</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../tap/metadata/TableSetParser.html#parseDataType(javax.xml.stream.XMLStreamReader)"><code>parseDataType(XMLStreamReader)</code></a></dd></dl>
</li>
</ul>
<a name="getPosition(javax.xml.stream.XMLStreamReader)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPosition</h4>
<pre>protected final&nbsp;java.lang.String&nbsp;getPosition(javax.xml.stream.XMLStreamReader&nbsp;reader)</pre>
<div class="block"><p>Get the current position of the given reader.</p>
 
 <p>
        This position is returned as a string having the following syntax: "[l.x,c.y]"
        (where x is the line number and y the column number ; x and y start at 1 ; x and y
        are both -1 if the end of the XML document has been reached).
 </p>
 
 <p><i>Note:
        The column position is generally just after the read element (node start/end tag, characters).
        However, with CHARACTERS items, this column position may be 2 characters after the real end.
 </i></p></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>reader</code> - XML reader whose the current position must be returned.</dd>
<dt><span class="strong">Returns:</span></dt><dd>A string representing the current reader position.</dd></dl>
</li>
</ul>
<a name="nextTag(javax.xml.stream.XMLStreamReader)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>nextTag</h4>
<pre>protected final&nbsp;int&nbsp;nextTag(javax.xml.stream.XMLStreamReader&nbsp;reader)
                     throws javax.xml.stream.XMLStreamException</pre>
<div class="block">Skip every elements until a START ELEMENT or an END ELEMENT is reached.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>reader</code> - XML reader.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The event of the last read tag. <i>Here, either <code>XMLStreamConstants.START_ELEMENT</code> or <code>XMLStreamConstants.END_ELEMENT</code>.</i></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>javax.xml.stream.XMLStreamException</code> - If there is an error processing the underlying XML source.</dd></dl>
</li>
</ul>
<a name="goToEndTag(javax.xml.stream.XMLStreamReader, java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>goToEndTag</h4>
<pre>protected final&nbsp;void&nbsp;goToEndTag(javax.xml.stream.XMLStreamReader&nbsp;reader,
              java.lang.String&nbsp;startNode)
                         throws javax.xml.stream.XMLStreamException,
                                <a href="../../tap/TAPException.html" title="class in tap">TAPException</a></pre>
<div class="block"><p>Skip all tags from the current position to the end of the specified node.</p>
 
 <p><b>IMPORTANT:
        This function MUST be called ONLY IF the reader is inside the node whose the end tag is searched.
        It may be in a child of this node or not, but the most important is to be inside it.
 </b></p>
 
 <p><i>Note:
        No tag will be read if the given startNode is NULL or an empty string.
 </i></p></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>reader</code> - XML reader.</dd><dd><code>startNode</code> - Name of the node whose the end must be reached.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>javax.xml.stream.XMLStreamException</code> - If there is an error processing the underlying XML source.</dd>
<dd><code><a href="../../tap/TAPException.html" title="class in tap">TAPException</a></code> - If the name of the only corresponding end element does not match the given one,
                                        or if the END ELEMENT can not be found <i>(2 possible reasons for that:
                                        1/ malformed XML document, 2/ this function has been called before the START ELEMENT has been read)</i>.</dd></dl>
</li>
</ul>
<a name="getText(javax.xml.stream.XMLStreamReader)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getText</h4>
<pre>protected final&nbsp;java.lang.String&nbsp;getText(javax.xml.stream.XMLStreamReader&nbsp;reader)
                                  throws javax.xml.stream.XMLStreamException</pre>
<div class="block"><p>Get the text of the current node.</p>
 
 <p>
        This function iterates while the next tags are of type CHARACTERS.
        Consequently, the next tag (start or end element) is already read when returning this function.
 </p>
 
 <p>
        All CHARACTERS elements are concatenated.
        All leading and trailing space characters (\r \n \t and ' ') of every lines are deleted ; only the last or the first \n or \r are kept.
 </p>
 
 <p><i>Note:
        This function is also skipping all COMMENT elements. This is particularly useful if a COMMENT is splitting a node text content ;
        in such case, the comment is ignored and both divided text are concatenated.
 </i></p></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>reader</code> - XML reader.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The whole text content of the current node.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>javax.xml.stream.XMLStreamException</code> - If there is an error processing the underlying XML source.</dd></dl>
</li>
</ul>
<a name="searchTable(java.lang.String, tap.metadata.TAPMetadata, java.lang.String)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>searchTable</h4>
<pre>protected final&nbsp;<a href="../../tap/metadata/TAPTable.html" title="class in tap.metadata">TAPTable</a>&nbsp;searchTable(java.lang.String&nbsp;tableName,
                   <a href="../../tap/metadata/TAPMetadata.html" title="class in tap.metadata">TAPMetadata</a>&nbsp;meta,
                   java.lang.String&nbsp;position)
                              throws <a href="../../tap/TAPException.html" title="class in tap">TAPException</a></pre>
<div class="block"><p>Search for the specified table in the given TAP metadata.</p>
 
 <p><i>Note: This function is not case sensitive.</i></p></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>tableName</code> - Name of the table to search. <i>The table name MAY be prefixed by a schema name (e.g. "mySchema.myTable").</i></dd><dd><code>meta</code> - All fetched TAP metadata.</dd><dd><code>position</code> - Position of the table name in the XML document. <i>This parameter is ONLY used in case of error.</i></dd>
<dt><span class="strong">Returns:</span></dt><dd>The corresponding TAP table.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../tap/TAPException.html" title="class in tap">TAPException</a></code> - If the table name syntax ([schema.]table) is incorrect,
                        or if several tables match to the specified table name (which is not prefixed by a schema name),
                        or if no match can be found.</dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/TableSetParser.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-files/index-1.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev Class</li>
<li><a href="../../tap/metadata/TableSetParser.ForeignKey.html" title="class in tap.metadata"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../index.html?tap/metadata/TableSetParser.html" target="_top">Frames</a></li>
<li><a href="TableSetParser.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
